{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://@capybash/magicslider/webpack/bootstrap","webpack://@capybash/magicslider/webpack/runtime/compat get default export","webpack://@capybash/magicslider/webpack/runtime/define property getters","webpack://@capybash/magicslider/webpack/runtime/hasOwnProperty shorthand","webpack://@capybash/magicslider/external root \"flarum.core.compat['admin/app']\"","webpack://@capybash/magicslider/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@capybash/magicslider/external root \"flarum.core.compat['admin/components/ExtensionPage']\"","webpack://@capybash/magicslider/external root \"flarum.core.compat['common/components/Button']\"","webpack://@capybash/magicslider/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@capybash/magicslider/./src/admin/components/MagicSliderSettingsPage.tsx","webpack://@capybash/magicslider/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@capybash/magicslider/./src/admin/index.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/app'];","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/components/ExtensionPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/icon'];","import app from 'flarum/admin/app';\nimport ExtensionPage from 'flarum/admin/components/ExtensionPage';\nimport Button from 'flarum/common/components/Button';\nimport icon from 'flarum/common/helpers/icon';\n\ntype Slide = { image: string; link?: string; newTab?: boolean };\n\nexport default class MagicSliderSettingsPage extends ExtensionPage {\n  slides: Slide[] = [];\n\n  oninit(vnode: any) {\n    super.oninit(vnode);\n    const raw = this.setting('capybash-magicslider.slides')() || '[]';\n    try {\n      this.slides = JSON.parse(raw);\n    } catch {\n      this.slides = [];\n    }\n  }\n\n  className() {\n    return 'MagicSliderSettingsPage';\n  }\n\n  oncreate(vnode: any) {\n    const list = vnode.dom.querySelector('.MagicSlides-list') as HTMLElement | null;\n    if (!list) return;\n\n    let dragEl: HTMLElement | null = null;\n\n    list.addEventListener('dragstart', (e: any) => {\n      const t = (e.target as HTMLElement).closest('.MagicSlides-item') as HTMLElement | null;\n      if (!t) return;\n      dragEl = t;\n      e.dataTransfer.effectAllowed = 'move';\n      t.classList.add('is-dragging');\n    });\n\n    list.addEventListener('dragend', () => {\n      if (dragEl) dragEl.classList.remove('is-dragging');\n      dragEl = null;\n    });\n\n    list.addEventListener('dragover', (e) => {\n      e.preventDefault();\n      const over = (e.target as HTMLElement).closest('.MagicSlides-item') as HTMLElement | null;\n      if (!dragEl || !over || over === dragEl) return;\n      const rect = over.getBoundingClientRect();\n      const after = (e as MouseEvent).clientY - rect.top > rect.height / 2;\n      over.parentElement?.insertBefore(dragEl, after ? over.nextSibling : over);\n    });\n\n    list.addEventListener('drop', () => {\n      const newOrder: Slide[] = [];\n      const items = list.querySelectorAll('.MagicSlides-item');\n      items.forEach((el: any) => {\n        const i = Number(el.dataset.index);\n        const s = this.slides[i];\n        if (s) newOrder.push(s);\n      });\n      this.slides = newOrder;\n      this.syncSlides();\n    });\n  }\n\n  content() {\n    return (\n      <div className=\"MagicSliderSettingsPage\">\n        <div className=\"MagicSliderSettingsPage-content\">\n          <section className=\"MagicSlider-SettingsSection\">\n            <h3>\n              <i className=\"fas fa-image\" />\n              {app.translator.trans('capy-magic-slider.admin.settings.section_display')}\n            </h3>\n            <div className=\"MagicSlider-SettingsSection-content\">\n              {this.buildSettingComponent({\n                type: 'number',\n                setting: 'capybash-magicslider.height_desktop',\n                label: app.translator.trans('capy-magic-slider.admin.settings.height_desktop'),\n                help: app.translator.trans('capy-magic-slider.admin.settings.height_desktop_help'),\n                min: 100,\n              })}\n              {this.buildSettingComponent({\n                type: 'number',\n                setting: 'capybash-magicslider.height_mobile',\n                label: app.translator.trans('capy-magic-slider.admin.settings.height_mobile'),\n                help: app.translator.trans('capy-magic-slider.admin.settings.height_mobile_help'),\n                min: 100,\n              })}\n              {this.buildSettingComponent({\n                type: 'number',\n                setting: 'capybash-magicslider.padding',\n                label: app.translator.trans('capy-magic-slider.admin.settings.padding'),\n                help: app.translator.trans('capy-magic-slider.admin.settings.padding_help'),\n                min: 0,\n              })}\n              {this.buildSettingComponent({\n                type: 'number',\n                setting: 'capybash-magicslider.radius',\n                label: app.translator.trans('capy-magic-slider.admin.settings.radius'),\n                help: app.translator.trans('capy-magic-slider.admin.settings.radius_help'),\n                min: 0,\n              })}\n              {this.buildSettingComponent({\n                type: 'number',\n                setting: 'capybash-magicslider.autoplay',\n                label: app.translator.trans('capy-magic-slider.admin.settings.autoplay'),\n                help: app.translator.trans('capy-magic-slider.admin.settings.autoplay_help'),\n                min: 0,\n              })}\n            </div>\n          </section>\n\n          <section className=\"MagicSlider-SettingsSection\">\n            <h3>\n              <i className=\"fas fa-sliders-h\" />\n              {app.translator.trans('capy-magic-slider.admin.settings.section_slides')}\n            </h3>\n            <div className=\"MagicSlider-SettingsSection-content\">\n              <div className=\"Form-group\">\n                <div className=\"MagicSlides-toolbar\">\n                  <Button className=\"Button Button--primary\" onclick={() => this.add()}>\n                    {icon('fas fa-plus')} {app.translator.trans('capy-magic-slider.admin.settings.add_slide')}\n                  </Button>\n                </div>\n\n                <div className=\"MagicSlides-list\">\n                  {this.slides.map((s, i) => (\n                    <div key={i} className=\"MagicSlides-item\" data-index={i} draggable=\"true\">\n                      <span className=\"MagicSlides-handle\" title={app.translator.trans('capy-magic-slider.admin.settings.drag')}>\n                        {icon('fas fa-grip-vertical')}\n                      </span>\n\n                      <input\n                        className=\"FormControl\"\n                        type=\"text\"\n                        placeholder={app.translator.trans('capy-magic-slider.admin.settings.image_placeholder')}\n                        value={s.image}\n                        oninput={(e: any) => {\n                          s.image = e.target.value;\n                          this.syncSlides();\n                        }}\n                      />\n\n                      <input\n                        className=\"FormControl MagicSlides-link\"\n                        type=\"text\"\n                        placeholder={app.translator.trans('capy-magic-slider.admin.settings.link_placeholder')}\n                        value={s.link || ''}\n                        oninput={(e: any) => {\n                          s.link = e.target.value;\n                          this.syncSlides();\n                        }}\n                      />\n\n                      <Button\n                        className={'Button MagicSlides-toggle' + (s.newTab ? ' is-active' : '')}\n                        onclick={() => {\n                          s.newTab = !s.newTab;\n                          this.syncSlides();\n                        }}\n                      >\n                        {icon('fas fa-external-link-alt')}\n                        <span>{app.translator.trans('capy-magic-slider.admin.settings.new_tab')}</span>\n                      </Button>\n\n                      <div className=\"MagicSlides-actions\">\n                        <Button className=\"Button Button--danger\" onclick={() => this.remove(i)}>\n                          {icon('fas fa-trash')}\n                          <span>{app.translator.trans('capy-magic-slider.admin.settings.delete')}</span>\n                        </Button>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </div>\n          </section>\n\n          {this.submitButton()}\n        </div>\n      </div>\n    );\n  }\n\n  add() {\n    this.slides.push({ image: '', link: '', newTab: false });\n    this.syncSlides();\n    setTimeout(() => m.redraw(), 0);\n  }\n\n  remove(i: number) {\n    this.slides.splice(i, 1);\n    this.syncSlides();\n  }\n\n  syncSlides() {\n    this.setting('capybash-magicslider.slides')(JSON.stringify(this.slides));\n    m.redraw();\n  }\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","import app from 'flarum/admin/app';\nimport MagicSliderSettingsPage from './components/MagicSliderSettingsPage';\n\napp.initializers.add('capybash-magicslider', () => {\n  app.extensionData.for('capybash-magicslider').registerPage(MagicSliderSettingsPage);\n});"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","flarum","core","compat","_setPrototypeOf","t","e","setPrototypeOf","bind","__proto__","MagicSliderSettingsPage","_ExtensionPage","_this","_len","arguments","length","args","Array","_key","apply","concat","slides","create","constructor","_proto","oninit","vnode","raw","this","setting","JSON","parse","_unused","className","oncreate","_this2","list","dom","querySelector","dragEl","addEventListener","target","closest","dataTransfer","effectAllowed","classList","add","remove","_over$parentElement","preventDefault","over","rect","getBoundingClientRect","after","clientY","top","height","parentElement","insertBefore","nextSibling","newOrder","querySelectorAll","forEach","el","i","Number","dataset","index","s","push","syncSlides","content","_this3","m","app","trans","buildSettingComponent","type","label","help","min","Button","onclick","icon","map","draggable","title","placeholder","value","image","oninput","link","newTab","submitButton","setTimeout","redraw","splice","stringify","ExtensionPage","registerPage"],"sourceRoot":""}