(()=>{var t={n:e=>{var i=e&&e.__esModule?()=>e.default:()=>e;return t.d(i,{a:i}),i},d:(e,i)=>{for(var a in i)t.o(i,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:i[a]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};(()=>{"use strict";const e=flarum.core.compat["forum/app"];var i=t.n(e);const a=flarum.core.compat["common/extend"],n=flarum.core.compat["forum/components/IndexPage"];var r=t.n(n);function o(t,e){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o(t,e)}const s=flarum.core.compat["common/Component"];var l=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this).index=0,e.interval=void 0,e.touchStartX=null,e.isMobile="undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(max-width: 768px)").matches,e.mq=void 0,e}var i,a;a=t,(i=e).prototype=Object.create(a.prototype),i.prototype.constructor=i,o(i,a);var n=e.prototype;return n.oncreate=function(t){var e=this,i=Number(t.attrs.autoplayMs||0);if(t.attrs.slides.length>1&&i>0&&(this.interval=window.setInterval(function(){e.next(t.attrs.slides.length),m.redraw()},i)),window.matchMedia){this.mq=window.matchMedia("(max-width: 768px)");var a=function(){var t;e.isMobile=!(null==(t=e.mq)||!t.matches),m.redraw()};this.mq.addEventListener?this.mq.addEventListener("change",a):this.mq.addListener(a)}},n.onremove=function(){if(this.interval&&window.clearInterval(this.interval),this.mq){var t=function(){};this.mq.removeEventListener?this.mq.removeEventListener("change",t):this.mq.removeListener(t)}},n.next=function(t){this.index=(this.index+1)%t},n.prev=function(t){this.index=(this.index-1+t)%t},n.onPointerDown=function(t){var e;this.touchStartX=null!=(e=t.clientX)?e:0},n.onPointerUp=function(t,e){var i;if(null!==this.touchStartX){var a=(null!=(i=t.clientX)?i:0)-this.touchStartX;this.touchStartX=null,Math.abs(a)>40&&(a<0?this.next(e):this.prev(e),m.redraw())}},n.viewInner=function(t){var e,i=this,a=t.attrs,n=a.slides,r=a.heightDesktop,o=a.heightMobile,s=a.paddingDesktop,l=a.paddingMobile,c=a.radiusDesktop,u=a.radiusMobile;if(!n.length)return null;var d=-100*this.index,h=this.isMobile?l:s,p=this.isMobile?u:c;return m("div",{className:"MagicSlider-wrap",style:{padding:h+"px"}},m("div",{className:"MagicSlider",style:(e={borderRadius:p+"px"},e["--ms-h-desktop"]=r+"px",e["--ms-h-mobile"]=o+"px",e),onpointerdown:function(t){return i.onPointerDown(t)},onpointerup:function(t){return i.onPointerUp(t,n.length)}},m("div",{className:"MagicSlider-track",style:{transform:"translateX("+d+"%)"}},n.map(function(t,e){return m("a",{key:e,className:"MagicSlide",href:t.link||"#",target:t.link?t.newTab?"_blank":"_self":void 0,rel:t.link&&t.newTab?"noopener":void 0,style:{backgroundImage:"url('"+t.image+"')"},onclick:function(e){t.link||e.preventDefault()}})})),n.length>1&&m("[",null,m("button",{className:"MagicSlider-btn prev","aria-label":"Previous",onclick:function(){i.prev(n.length)}},m("i",{className:"fas fa-chevron-left"})),m("button",{className:"MagicSlider-btn next","aria-label":"Next",onclick:function(){i.next(n.length)}},m("i",{className:"fas fa-chevron-right"})),m("div",{className:"MagicSlider-dots"},n.map(function(t,e){return m("button",{key:e,className:"dot"+(i.index===e?" is-active":""),"aria-label":"Slide "+(e+1),onclick:function(){i.index=e}})})))))},n.view=function(t){return t.attrs.fitToLayout?m("div",{className:"MagicSlider-outer"},m("div",{className:"container"},m("div",{className:"sideNavOffset"},this.viewInner(t)))):this.viewInner(t)},e}(t.n(s)());function c(t){return!0===t||1===t||"1"===t||"true"===t}i().initializers.add("capybash-magicslider",function(){(0,a.override)(r().prototype,"hero",function(t){if(c(i().forum.attribute("capybash-magicslider.hide_on_tag_pages"))&&function(){var t,e="undefined"!=typeof location&&location.pathname||"";if(e&&/(?:^|\/)t(?:\/|$)/.test(e))return!0;if(e&&/(?:^|\/)tags(?:\/|$)/.test(e))return!1;var i=(null==(t=window)||null==(t=t.m)||null==(t=t.route)||null==t.get?void 0:t.get())||"";return!(!i||!/(?:^|\/)t(?:\/|$)/.test(i))||(i&&/(?:^|\/)tags(?:\/|$)/.test(i),!1)}())return t();var e=i().forum.attribute("capybash-magicslider.slides")||"[]",a=[];try{a=JSON.parse(e)}catch(t){a=[]}var n=a.filter(function(t){return t&&t.image}).map(function(t){return{image:t.image||"",link:t.link||"",newTab:!0===t.newTab||"true"===t.newTab}});if(!n.length)return t();var r=Number(i().forum.attribute("capybash-magicslider.height_desktop")||260),o=Number(i().forum.attribute("capybash-magicslider.height_mobile")||200),s=Number(i().forum.attribute("capybash-magicslider.padding_desktop")||0),u=Number(i().forum.attribute("capybash-magicslider.padding_mobile")||0),d=Number(i().forum.attribute("capybash-magicslider.radius_desktop")||0),h=Number(i().forum.attribute("capybash-magicslider.radius_mobile")||0),p=Number(i().forum.attribute("capybash-magicslider.autoplay")||0),f=c(i().forum.attribute("capybash-magicslider.fit_to_layout"));return m(l,{slides:n,heightDesktop:r,heightMobile:o,paddingDesktop:s,paddingMobile:u,radiusDesktop:d,radiusMobile:h,autoplayMs:p,fitToLayout:f})})})})(),module.exports={}})();
//# sourceMappingURL=forum.js.map