(()=>{var t={n:e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return t.d(r,{a:r}),r},d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};(()=>{"use strict";const e=flarum.core.compat["forum/app"];var r=t.n(e);const n=flarum.core.compat["common/extend"],a=flarum.core.compat["forum/components/IndexPage"];var i=t.n(a);function o(t,e){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o(t,e)}const l=flarum.core.compat["common/Component"];var s=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).index=0,e.interval=void 0,e.touchStartX=null,e}var r,n;n=t,(r=e).prototype=Object.create(n.prototype),r.prototype.constructor=r,o(r,n);var a=e.prototype;return a.oncreate=function(t){var e=this,r=Number(t.attrs.autoplayMs||0);t.attrs.slides.length>1&&r>0&&(this.interval=window.setInterval(function(){e.next(t.attrs.slides.length),m.redraw()},r))},a.onremove=function(){this.interval&&window.clearInterval(this.interval)},a.next=function(t){this.index=(this.index+1)%t},a.prev=function(t){this.index=(this.index-1+t)%t},a.onPointerDown=function(t){var e;this.touchStartX=null!=(e=t.clientX)?e:0},a.onPointerUp=function(t,e){var r;if(null!==this.touchStartX){var n=(null!=(r=t.clientX)?r:0)-this.touchStartX;this.touchStartX=null,Math.abs(n)>40&&(n<0?this.next(e):this.prev(e),m.redraw())}},a.view=function(t){var e,r=this,n=t.attrs,a=n.slides,i=n.heightDesktop,o=n.heightMobile,l=n.padding,s=n.radius;if(!a.length)return null;var u=-100*this.index;return m("div",{className:"MagicSlider-wrap",style:{padding:l+"px"}},m("div",{className:"MagicSlider",style:(e={borderRadius:s+"px"},e["--ms-h-desktop"]=i+"px",e["--ms-h-mobile"]=o+"px",e),onpointerdown:function(t){return r.onPointerDown(t)},onpointerup:function(t){return r.onPointerUp(t,a.length)}},m("div",{className:"MagicSlider-track",style:{transform:"translateX("+u+"%)"}},a.map(function(t,e){return m("a",{key:e,className:"MagicSlide",href:t.link||"#",target:t.link?t.newTab?"_blank":"_self":void 0,rel:t.link&&t.newTab?"noopener":void 0,style:{backgroundImage:"url('"+t.image+"')"},onclick:function(e){t.link||e.preventDefault()}})})),a.length>1&&m("[",null,m("button",{className:"MagicSlider-btn prev","aria-label":"Previous",onclick:function(){r.prev(a.length)}},m("i",{className:"fas fa-chevron-left"})),m("button",{className:"MagicSlider-btn next","aria-label":"Next",onclick:function(){r.next(a.length)}},m("i",{className:"fas fa-chevron-right"})),m("div",{className:"MagicSlider-dots"},a.map(function(t,e){return m("button",{key:e,className:"dot"+(r.index===e?" is-active":""),"aria-label":"Slide "+(e+1),onclick:function(){r.index=e}})})))))},e}(t.n(l)());const u=flarum.core.compat["tags/components/TagsPage"];var c=t.n(u);function d(){var t=r().forum.attribute("capybash-magicslider.slides")||"[]",e=[];try{e=JSON.parse(t)}catch(t){e=[]}return e.filter(function(t){return t&&t.image}).map(function(t){return{image:t.image||"",link:t.link||"",newTab:!0===t.newTab||"true"===t.newTab}})}function p(){var t=Number(r().forum.attribute("capybash-magicslider.height_desktop")||260),e=Number(r().forum.attribute("capybash-magicslider.height_mobile")||200),n=Number(r().forum.attribute("capybash-magicslider.padding")||0),a=Number(r().forum.attribute("capybash-magicslider.radius")||0),i=Number(r().forum.attribute("capybash-magicslider.autoplay")||0);return{heightDesktop:t,heightMobile:e,padding:n,radius:a,autoplayMs:i>0?1e3*i:0}}r().initializers.add("capybash-magicslider",function(){(0,n.override)(i().prototype,"hero",function(t){var e,n,a=d();if(!a.length)return t();if(((null==(e=r().current)||null==(e=e.data)?void 0:e.routeName)||(null==(n=r().current)||null==n.get?void 0:n.get("routeName"))||"").startsWith("tag"))return t();var i=p(),o=i.heightDesktop,l=i.heightMobile,u=i.padding,c=i.radius,h=i.autoplayMs;return m(s,{slides:a,heightDesktop:o,heightMobile:l,padding:u,radius:c,autoplayMs:h})});try{c()&&(0,n.override)(c().prototype,"hero",function(t){var e=d();if(!e.length)return null;var r=p(),n=r.heightDesktop,a=r.heightMobile,i=r.padding,o=r.radius,l=r.autoplayMs;return m(s,{slides:e,heightDesktop:n,heightMobile:a,padding:i,radius:o,autoplayMs:l})})}catch(t){}})})(),module.exports={}})();
//# sourceMappingURL=forum.js.map