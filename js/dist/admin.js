(()=>{var t={n:a=>{var e=a&&a.__esModule?()=>a.default:()=>a;return t.d(e,{a:e}),e},d:(a,e)=>{for(var i in e)t.o(e,i)&&!t.o(a,i)&&Object.defineProperty(a,i,{enumerable:!0,get:e[i]})},o:(t,a)=>Object.prototype.hasOwnProperty.call(t,a)};(()=>{"use strict";const a=flarum.core.compat["admin/app"];var e=t.n(a);function i(t,a){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,a){return t.__proto__=a,t},i(t,a)}const s=flarum.core.compat["admin/components/ExtensionPage"];var n=t.n(s);const r=flarum.core.compat["common/components/Button"];var l=t.n(r);const c=flarum.core.compat["common/helpers/icon"];var o=t.n(c),d=function(t){function a(){for(var a,e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return(a=t.call.apply(t,[this].concat(i))||this).slides=[],a}var s,n;n=t,(s=a).prototype=Object.create(n.prototype),s.prototype.constructor=s,i(s,n);var r=a.prototype;return r.oninit=function(a){t.prototype.oninit.call(this,a);var e=this.setting("capybash-magicslider.slides")()||"[]";try{this.slides=JSON.parse(e)}catch(t){this.slides=[]}},r.className=function(){return"MagicSliderSettingsPage"},r.oncreate=function(t){var a=this,e=t.dom.querySelector(".MagicSlides-list");if(e){var i=null;e.addEventListener("dragstart",function(t){var a=t.target.closest(".MagicSlides-item");a&&(i=a,t.dataTransfer.effectAllowed="move",a.classList.add("is-dragging"))}),e.addEventListener("dragend",function(){i&&i.classList.remove("is-dragging"),i=null}),e.addEventListener("dragover",function(t){var a;t.preventDefault();var e=t.target.closest(".MagicSlides-item");if(i&&e&&e!==i){var s=e.getBoundingClientRect(),n=t.clientY-s.top>s.height/2;null==(a=e.parentElement)||a.insertBefore(i,n?e.nextSibling:e)}}),e.addEventListener("drop",function(){var t=[];e.querySelectorAll(".MagicSlides-item").forEach(function(e){var i=Number(e.dataset.index),s=a.slides[i];s&&t.push(s)}),a.slides=t,a.syncSlides()})}},r.content=function(){var t=this;return m("div",{className:"MagicSliderSettingsPage"},m("div",{className:"MagicSliderSettingsPage-content"},m("section",{className:"MagicSlider-SettingsSection"},m("h3",null,m("i",{className:"fas fa-image"}),e().translator.trans("capy-magic-slider.admin.settings.section_display")),m("div",{className:"MagicSlider-SettingsSection-content"},this.buildSettingComponent({type:"number",setting:"capybash-magicslider.height_desktop",label:e().translator.trans("capy-magic-slider.admin.settings.height_desktop"),help:e().translator.trans("capy-magic-slider.admin.settings.height_desktop_help"),min:100}),this.buildSettingComponent({type:"number",setting:"capybash-magicslider.height_mobile",label:e().translator.trans("capy-magic-slider.admin.settings.height_mobile"),help:e().translator.trans("capy-magic-slider.admin.settings.height_mobile_help"),min:100}),this.buildSettingComponent({type:"number",setting:"capybash-magicslider.padding",label:e().translator.trans("capy-magic-slider.admin.settings.padding"),help:e().translator.trans("capy-magic-slider.admin.settings.padding_help"),min:0}),this.buildSettingComponent({type:"number",setting:"capybash-magicslider.radius",label:e().translator.trans("capy-magic-slider.admin.settings.radius"),help:e().translator.trans("capy-magic-slider.admin.settings.radius_help"),min:0}),this.buildSettingComponent({type:"number",setting:"capybash-magicslider.autoplay",label:e().translator.trans("capy-magic-slider.admin.settings.autoplay"),help:e().translator.trans("capy-magic-slider.admin.settings.autoplay_help"),min:0}),this.buildSettingComponent({type:"boolean",setting:"capybash-magicslider.hide_on_tag_pages",label:e().translator.trans("capy-magic-slider.admin.settings.hide_on_tag_pages"),help:e().translator.trans("capy-magic-slider.admin.settings.hide_on_tag_pages_help")}))),m("section",{className:"MagicSlider-SettingsSection"},m("h3",null,m("i",{className:"fas fa-sliders-h"}),e().translator.trans("capy-magic-slider.admin.settings.section_slides")),m("div",{className:"MagicSlider-SettingsSection-content"},m("div",{className:"Form-group"},m("div",{className:"MagicSlides-toolbar"},m(l(),{className:"Button Button--primary",onclick:function(){return t.add()}},o()("fas fa-plus")," ",e().translator.trans("capy-magic-slider.admin.settings.add_slide"))),m("div",{className:"MagicSlides-list"},this.slides.map(function(a,i){return m("div",{key:i,className:"MagicSlides-item","data-index":i,draggable:"true"},m("span",{className:"MagicSlides-handle",title:e().translator.trans("capy-magic-slider.admin.settings.drag")},o()("fas fa-grip-vertical")),m("input",{className:"FormControl",type:"text",placeholder:e().translator.trans("capy-magic-slider.admin.settings.image_placeholder"),value:a.image,oninput:function(e){a.image=e.target.value,t.syncSlides()}}),m("input",{className:"FormControl MagicSlides-link",type:"text",placeholder:e().translator.trans("capy-magic-slider.admin.settings.link_placeholder"),value:a.link||"",oninput:function(e){a.link=e.target.value,t.syncSlides()}}),m(l(),{className:"Button MagicSlides-toggle"+(a.newTab?" is-active":""),onclick:function(){a.newTab=!a.newTab,t.syncSlides()}},o()("fas fa-external-link-alt"),m("span",null,e().translator.trans("capy-magic-slider.admin.settings.new_tab"))),m("div",{className:"MagicSlides-actions"},m(l(),{className:"Button Button--danger",onclick:function(){return t.remove(i)}},o()("fas fa-trash"),m("span",null,e().translator.trans("capy-magic-slider.admin.settings.delete")))))}))))),this.submitButton()))},r.add=function(){this.slides.push({image:"",link:"",newTab:!1}),this.syncSlides(),setTimeout(function(){return m.redraw()},0)},r.remove=function(t){this.slides.splice(t,1),this.syncSlides()},r.syncSlides=function(){this.setting("capybash-magicslider.slides")(JSON.stringify(this.slides)),m.redraw()},a}(n());e().initializers.add("capybash-magicslider",function(){e().extensionData.for("capybash-magicslider").registerPage(d)})})(),module.exports={}})();
//# sourceMappingURL=admin.js.map