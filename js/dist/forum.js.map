{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@capybash/magicslider/./node_modules/mithril/util/censor.js","webpack://@capybash/magicslider/./node_modules/mithril/render/trust.js","webpack://@capybash/magicslider/./node_modules/mithril/querystring/build.js","webpack://@capybash/magicslider/./node_modules/mithril/render/cachedAttrsIsStaticMap.js","webpack://@capybash/magicslider/./node_modules/mithril/querystring/parse.js","webpack://@capybash/magicslider/./node_modules/mithril/render/emptyAttrs.js","webpack://@capybash/magicslider/./node_modules/mithril/pathname/parse.js","webpack://@capybash/magicslider/./node_modules/mithril/render.js","webpack://@capybash/magicslider/./node_modules/mithril/render/render.js","webpack://@capybash/magicslider/./node_modules/mithril/api/mount-redraw.js","webpack://@capybash/magicslider/./node_modules/mithril/index.js","webpack://@capybash/magicslider/./node_modules/mithril/mount-redraw.js","webpack://@capybash/magicslider/./node_modules/mithril/route.js","webpack://@capybash/magicslider/./node_modules/mithril/render/fragment.js","webpack://@capybash/magicslider/./node_modules/mithril/pathname/compileTemplate.js","webpack://@capybash/magicslider/./node_modules/mithril/util/hasOwn.js","webpack://@capybash/magicslider/./node_modules/mithril/render/domFor.js","webpack://@capybash/magicslider/./node_modules/mithril/hyperscript.js","webpack://@capybash/magicslider/./node_modules/mithril/request.js","webpack://@capybash/magicslider/./node_modules/mithril/render/vnode.js","webpack://@capybash/magicslider/./node_modules/mithril/api/router.js","webpack://@capybash/magicslider/./node_modules/mithril/request/request.js","webpack://@capybash/magicslider/./node_modules/mithril/pathname/build.js","webpack://@capybash/magicslider/./node_modules/mithril/render/hyperscript.js","webpack://@capybash/magicslider/./node_modules/mithril/render/hyperscriptVnode.js","webpack://@capybash/magicslider/webpack/bootstrap","webpack://@capybash/magicslider/webpack/runtime/compat get default export","webpack://@capybash/magicslider/webpack/runtime/define property getters","webpack://@capybash/magicslider/webpack/runtime/hasOwnProperty shorthand","webpack://@capybash/magicslider/external root \"flarum.reg.get('core', 'forum/app')\"","webpack://@capybash/magicslider/external root \"flarum.reg.get('core', 'common/extend')\"","webpack://@capybash/magicslider/external root \"flarum.reg.get('core', 'forum/components/IndexPage')\"","webpack://@capybash/magicslider/external root \"flarum.reg.get('core', 'forum/components/WelcomeHero')\"","webpack://@capybash/magicslider/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://@capybash/magicslider/./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://@capybash/magicslider/./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://@capybash/magicslider/./node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://@capybash/magicslider/external root \"flarum.reg.get('core', 'common/Component')\"","webpack://@capybash/magicslider/./src/forum/components/MagicSlider.tsx","webpack://@capybash/magicslider/./src/forum/index.tsx"],"sourcesContent":["\"use strict\"\n\n// Note: this is mildly perf-sensitive.\n//\n// It does *not* use `delete` - dynamic `delete`s usually cause objects to bail\n// out into dictionary mode and just generally cause a bunch of optimization\n// issues within engines.\n//\n// Ideally, I would've preferred to do this, if it weren't for the optimization\n// issues:\n//\n// ```js\n// const hasOwn = require(\"./hasOwn\")\n// const magic = [\n//     \"key\", \"oninit\", \"oncreate\", \"onbeforeupdate\", \"onupdate\",\n//     \"onbeforeremove\", \"onremove\",\n// ]\n// module.exports = (attrs, extras) => {\n//     const result = Object.assign(Object.create(null), attrs)\n//     for (const key of magic) delete result[key]\n//     if (extras != null) for (const key of extras) delete result[key]\n//     return result\n// }\n// ```\n\nvar hasOwn = require(\"./hasOwn\")\n// Words in RegExp literals are sometimes mangled incorrectly by the internal bundler, so use RegExp().\nvar magic = new RegExp(\"^(?:key|oninit|oncreate|onbeforeupdate|onupdate|onbeforeremove|onremove)$\")\n\nmodule.exports = function(attrs, extras) {\n\tvar result = {}\n\n\tif (extras != null) {\n\t\tfor (var key in attrs) {\n\t\t\tif (hasOwn.call(attrs, key) && !magic.test(key) && extras.indexOf(key) < 0) {\n\t\t\t\tresult[key] = attrs[key]\n\t\t\t}\n\t\t}\n\t} else {\n\t\tfor (var key in attrs) {\n\t\t\tif (hasOwn.call(attrs, key) && !magic.test(key)) {\n\t\t\t\tresult[key] = attrs[key]\n\t\t\t}\n\t\t}\n\t}\n\n\treturn result\n}\n","\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\n\nmodule.exports = function(html) {\n\tif (html == null) html = \"\"\n\treturn Vnode(\"<\", undefined, undefined, html, undefined, undefined)\n}\n","\"use strict\"\n\nmodule.exports = function(object) {\n\tif (Object.prototype.toString.call(object) !== \"[object Object]\") return \"\"\n\n\tvar args = []\n\tfor (var key in object) {\n\t\tdestructure(key, object[key])\n\t}\n\n\treturn args.join(\"&\")\n\n\tfunction destructure(key, value) {\n\t\tif (Array.isArray(value)) {\n\t\t\tfor (var i = 0; i < value.length; i++) {\n\t\t\t\tdestructure(key + \"[\" + i + \"]\", value[i])\n\t\t\t}\n\t\t}\n\t\telse if (Object.prototype.toString.call(value) === \"[object Object]\") {\n\t\t\tfor (var i in value) {\n\t\t\t\tdestructure(key + \"[\" + i + \"]\", value[i])\n\t\t\t}\n\t\t}\n\t\telse args.push(encodeURIComponent(key) + (value != null && value !== \"\" ? \"=\" + encodeURIComponent(value) : \"\"))\n\t}\n}\n","\"use strict\"\n\nvar emptyAttrs = require(\"./emptyAttrs\")\n\n// This Map manages the following:\n// - Whether an attrs is cached attrs generated by compileSelector().\n// - Whether the cached attrs is \"static\", i.e., does not contain any form attributes.\n// These information will be useful to skip updating attrs in render().\n//\n// Since the attrs used as keys in this map are not released from the selectorCache object,\n// there is no risk of memory leaks. Therefore, Map is used here instead of WeakMap.\nmodule.exports = new Map([[emptyAttrs, true]])\n","\"use strict\"\n\nfunction decodeURIComponentSave(str) {\n\ttry {\n\t\treturn decodeURIComponent(str)\n\t} catch(err) {\n\t\treturn str\n\t}\n}\n\nmodule.exports = function(string) {\n\tif (string === \"\" || string == null) return {}\n\tif (string.charAt(0) === \"?\") string = string.slice(1)\n\n\tvar entries = string.split(\"&\"), counters = {}, data = {}\n\tfor (var i = 0; i < entries.length; i++) {\n\t\tvar entry = entries[i].split(\"=\")\n\t\tvar key = decodeURIComponentSave(entry[0])\n\t\tvar value = entry.length === 2 ? decodeURIComponentSave(entry[1]) : \"\"\n\n\t\tif (value === \"true\") value = true\n\t\telse if (value === \"false\") value = false\n\n\t\tvar levels = key.split(/\\]\\[?|\\[/)\n\t\tvar cursor = data\n\t\tif (key.indexOf(\"[\") > -1) levels.pop()\n\t\tfor (var j = 0; j < levels.length; j++) {\n\t\t\tvar level = levels[j], nextLevel = levels[j + 1]\n\t\t\tvar isNumber = nextLevel == \"\" || !isNaN(parseInt(nextLevel, 10))\n\t\t\tif (level === \"\") {\n\t\t\t\tvar key = levels.slice(0, j).join()\n\t\t\t\tif (counters[key] == null) {\n\t\t\t\t\tcounters[key] = Array.isArray(cursor) ? cursor.length : 0\n\t\t\t\t}\n\t\t\t\tlevel = counters[key]++\n\t\t\t}\n\t\t\t// Disallow direct prototype pollution\n\t\t\telse if (level === \"__proto__\") break\n\t\t\tif (j === levels.length - 1) cursor[level] = value\n\t\t\telse {\n\t\t\t\t// Read own properties exclusively to disallow indirect\n\t\t\t\t// prototype pollution\n\t\t\t\tvar desc = Object.getOwnPropertyDescriptor(cursor, level)\n\t\t\t\tif (desc != null) desc = desc.value\n\t\t\t\tif (desc == null) cursor[level] = desc = isNumber ? [] : {}\n\t\t\t\tcursor = desc\n\t\t\t}\n\t\t}\n\t}\n\treturn data\n}\n","\"use strict\"\n\n// This is an attrs object that is used by default when attrs is undefined or null.\nmodule.exports = {}\n","\"use strict\"\n\nvar parseQueryString = require(\"../querystring/parse\")\n\n// Returns `{path, params}` from `url`\nmodule.exports = function(url) {\n\tvar queryIndex = url.indexOf(\"?\")\n\tvar hashIndex = url.indexOf(\"#\")\n\tvar queryEnd = hashIndex < 0 ? url.length : hashIndex\n\tvar pathEnd = queryIndex < 0 ? queryEnd : queryIndex\n\tvar path = url.slice(0, pathEnd).replace(/\\/{2,}/g, \"/\")\n\n\tif (!path) path = \"/\"\n\telse {\n\t\tif (path[0] !== \"/\") path = \"/\" + path\n\t}\n\treturn {\n\t\tpath: path,\n\t\tparams: queryIndex < 0\n\t\t\t? {}\n\t\t\t: parseQueryString(url.slice(queryIndex + 1, queryEnd)),\n\t}\n}\n","\"use strict\"\n\nmodule.exports = require(\"./render/render\")(typeof window !== \"undefined\" ? window : null)\n","\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\nvar df = require(\"../render/domFor\")\nvar delayedRemoval = df.delayedRemoval\nvar domFor = df.domFor\nvar cachedAttrsIsStaticMap = require(\"./cachedAttrsIsStaticMap\")\n\nmodule.exports = function() {\n\tvar nameSpace = {\n\t\tsvg: \"http://www.w3.org/2000/svg\",\n\t\tmath: \"http://www.w3.org/1998/Math/MathML\"\n\t}\n\n\tvar currentRedraw\n\tvar currentRender\n\n\tfunction getDocument(dom) {\n\t\treturn dom.ownerDocument;\n\t}\n\n\tfunction getNameSpace(vnode) {\n\t\treturn vnode.attrs && vnode.attrs.xmlns || nameSpace[vnode.tag]\n\t}\n\n\t//sanity check to discourage people from doing `vnode.state = ...`\n\tfunction checkState(vnode, original) {\n\t\tif (vnode.state !== original) throw new Error(\"'vnode.state' must not be modified.\")\n\t}\n\n\t//Note: the hook is passed as the `this` argument to allow proxying the\n\t//arguments without requiring a full array allocation to do so. It also\n\t//takes advantage of the fact the current `vnode` is the first argument in\n\t//all lifecycle methods.\n\tfunction callHook(vnode) {\n\t\tvar original = vnode.state\n\t\ttry {\n\t\t\treturn this.apply(original, arguments)\n\t\t} finally {\n\t\t\tcheckState(vnode, original)\n\t\t}\n\t}\n\n\t// IE11 (at least) throws an UnspecifiedError when accessing document.activeElement when\n\t// inside an iframe. Catch and swallow this error, and heavy-handidly return null.\n\tfunction activeElement(dom) {\n\t\ttry {\n\t\t\treturn getDocument(dom).activeElement\n\t\t} catch (e) {\n\t\t\treturn null\n\t\t}\n\t}\n\t//create\n\tfunction createNodes(parent, vnodes, start, end, hooks, nextSibling, ns) {\n\t\tfor (var i = start; i < end; i++) {\n\t\t\tvar vnode = vnodes[i]\n\t\t\tif (vnode != null) {\n\t\t\t\tcreateNode(parent, vnode, hooks, ns, nextSibling)\n\t\t\t}\n\t\t}\n\t}\n\tfunction createNode(parent, vnode, hooks, ns, nextSibling) {\n\t\tvar tag = vnode.tag\n\t\tif (typeof tag === \"string\") {\n\t\t\tvnode.state = {}\n\t\t\tif (vnode.attrs != null) initLifecycle(vnode.attrs, vnode, hooks)\n\t\t\tswitch (tag) {\n\t\t\t\tcase \"#\": createText(parent, vnode, nextSibling); break\n\t\t\t\tcase \"<\": createHTML(parent, vnode, ns, nextSibling); break\n\t\t\t\tcase \"[\": createFragment(parent, vnode, hooks, ns, nextSibling); break\n\t\t\t\tdefault: createElement(parent, vnode, hooks, ns, nextSibling)\n\t\t\t}\n\t\t}\n\t\telse createComponent(parent, vnode, hooks, ns, nextSibling)\n\t}\n\tfunction createText(parent, vnode, nextSibling) {\n\t\tvnode.dom = getDocument(parent).createTextNode(vnode.children)\n\t\tinsertDOM(parent, vnode.dom, nextSibling)\n\t}\n\tvar possibleParents = {caption: \"table\", thead: \"table\", tbody: \"table\", tfoot: \"table\", tr: \"tbody\", th: \"tr\", td: \"tr\", colgroup: \"table\", col: \"colgroup\"}\n\tfunction createHTML(parent, vnode, ns, nextSibling) {\n\t\tvar match = vnode.children.match(/^\\s*?<(\\w+)/im) || []\n\t\t// not using the proper parent makes the child element(s) vanish.\n\t\t//     var div = document.createElement(\"div\")\n\t\t//     div.innerHTML = \"<td>i</td><td>j</td>\"\n\t\t//     console.log(div.innerHTML)\n\t\t// --> \"ij\", no <td> in sight.\n\t\tvar temp = getDocument(parent).createElement(possibleParents[match[1]] || \"div\")\n\t\tif (ns === \"http://www.w3.org/2000/svg\") {\n\t\t\ttemp.innerHTML = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\">\" + vnode.children + \"</svg>\"\n\t\t\ttemp = temp.firstChild\n\t\t} else {\n\t\t\ttemp.innerHTML = vnode.children\n\t\t}\n\t\tvnode.dom = temp.firstChild\n\t\tvnode.domSize = temp.childNodes.length\n\t\t// Capture nodes to remove, so we don't confuse them.\n\t\tvar fragment = getDocument(parent).createDocumentFragment()\n\t\tvar child\n\t\twhile (child = temp.firstChild) {\n\t\t\tfragment.appendChild(child)\n\t\t}\n\t\tinsertDOM(parent, fragment, nextSibling)\n\t}\n\tfunction createFragment(parent, vnode, hooks, ns, nextSibling) {\n\t\tvar fragment = getDocument(parent).createDocumentFragment()\n\t\tif (vnode.children != null) {\n\t\t\tvar children = vnode.children\n\t\t\tcreateNodes(fragment, children, 0, children.length, hooks, null, ns)\n\t\t}\n\t\tvnode.dom = fragment.firstChild\n\t\tvnode.domSize = fragment.childNodes.length\n\t\tinsertDOM(parent, fragment, nextSibling)\n\t}\n\tfunction createElement(parent, vnode, hooks, ns, nextSibling) {\n\t\tvar tag = vnode.tag\n\t\tvar attrs = vnode.attrs\n\t\tvar is = vnode.is\n\n\t\tns = getNameSpace(vnode) || ns\n\n\t\tvar element = ns ?\n\t\t\tis ? getDocument(parent).createElementNS(ns, tag, {is: is}) : getDocument(parent).createElementNS(ns, tag) :\n\t\t\tis ? getDocument(parent).createElement(tag, {is: is}) : getDocument(parent).createElement(tag)\n\t\tvnode.dom = element\n\n\t\tif (attrs != null) {\n\t\t\tsetAttrs(vnode, attrs, ns)\n\t\t}\n\n\t\tinsertDOM(parent, element, nextSibling)\n\n\t\tif (!maybeSetContentEditable(vnode)) {\n\t\t\tif (vnode.children != null) {\n\t\t\t\tvar children = vnode.children\n\t\t\t\tcreateNodes(element, children, 0, children.length, hooks, null, ns)\n\t\t\t\tif (vnode.tag === \"select\" && attrs != null) setLateSelectAttrs(vnode, attrs)\n\t\t\t}\n\t\t}\n\t}\n\tfunction initComponent(vnode, hooks) {\n\t\tvar sentinel\n\t\tif (typeof vnode.tag.view === \"function\") {\n\t\t\tvnode.state = Object.create(vnode.tag)\n\t\t\tsentinel = vnode.state.view\n\t\t\tif (sentinel.$$reentrantLock$$ != null) return\n\t\t\tsentinel.$$reentrantLock$$ = true\n\t\t} else {\n\t\t\tvnode.state = void 0\n\t\t\tsentinel = vnode.tag\n\t\t\tif (sentinel.$$reentrantLock$$ != null) return\n\t\t\tsentinel.$$reentrantLock$$ = true\n\t\t\tvnode.state = (vnode.tag.prototype != null && typeof vnode.tag.prototype.view === \"function\") ? new vnode.tag(vnode) : vnode.tag(vnode)\n\t\t}\n\t\tinitLifecycle(vnode.state, vnode, hooks)\n\t\tif (vnode.attrs != null) initLifecycle(vnode.attrs, vnode, hooks)\n\t\tvnode.instance = Vnode.normalize(callHook.call(vnode.state.view, vnode))\n\t\tif (vnode.instance === vnode) throw Error(\"A view cannot return the vnode it received as argument\")\n\t\tsentinel.$$reentrantLock$$ = null\n\t}\n\tfunction createComponent(parent, vnode, hooks, ns, nextSibling) {\n\t\tinitComponent(vnode, hooks)\n\t\tif (vnode.instance != null) {\n\t\t\tcreateNode(parent, vnode.instance, hooks, ns, nextSibling)\n\t\t\tvnode.dom = vnode.instance.dom\n\t\t\tvnode.domSize = vnode.dom != null ? vnode.instance.domSize : 0\n\t\t}\n\t\telse {\n\t\t\tvnode.domSize = 0\n\t\t}\n\t}\n\n\t//update\n\t/**\n\t * @param {Element|Fragment} parent - the parent element\n\t * @param {Vnode[] | null} old - the list of vnodes of the last `render()` call for\n\t *                               this part of the tree\n\t * @param {Vnode[] | null} vnodes - as above, but for the current `render()` call.\n\t * @param {Function[]} hooks - an accumulator of post-render hooks (oncreate/onupdate)\n\t * @param {Element | null} nextSibling - the next DOM node if we're dealing with a\n\t *                                       fragment that is not the last item in its\n\t *                                       parent\n\t * @param {'svg' | 'math' | String | null} ns) - the current XML namespace, if any\n\t * @returns void\n\t */\n\t// This function diffs and patches lists of vnodes, both keyed and unkeyed.\n\t//\n\t// We will:\n\t//\n\t// 1. describe its general structure\n\t// 2. focus on the diff algorithm optimizations\n\t// 3. discuss DOM node operations.\n\n\t// ## Overview:\n\t//\n\t// The updateNodes() function:\n\t// - deals with trivial cases\n\t// - determines whether the lists are keyed or unkeyed based on the first non-null node\n\t//   of each list.\n\t// - diffs them and patches the DOM if needed (that's the brunt of the code)\n\t// - manages the leftovers: after diffing, are there:\n\t//   - old nodes left to remove?\n\t// \t - new nodes to insert?\n\t// \t deal with them!\n\t//\n\t// The lists are only iterated over once, with an exception for the nodes in `old` that\n\t// are visited in the fourth part of the diff and in the `removeNodes` loop.\n\n\t// ## Diffing\n\t//\n\t// Reading https://github.com/localvoid/ivi/blob/ddc09d06abaef45248e6133f7040d00d3c6be853/packages/ivi/src/vdom/implementation.ts#L617-L837\n\t// may be good for context on longest increasing subsequence-based logic for moving nodes.\n\t//\n\t// In order to diff keyed lists, one has to\n\t//\n\t// 1) match nodes in both lists, per key, and update them accordingly\n\t// 2) create the nodes present in the new list, but absent in the old one\n\t// 3) remove the nodes present in the old list, but absent in the new one\n\t// 4) figure out what nodes in 1) to move in order to minimize the DOM operations.\n\t//\n\t// To achieve 1) one can create a dictionary of keys => index (for the old list), then iterate\n\t// over the new list and for each new vnode, find the corresponding vnode in the old list using\n\t// the map.\n\t// 2) is achieved in the same step: if a new node has no corresponding entry in the map, it is new\n\t// and must be created.\n\t// For the removals, we actually remove the nodes that have been updated from the old list.\n\t// The nodes that remain in that list after 1) and 2) have been performed can be safely removed.\n\t// The fourth step is a bit more complex and relies on the longest increasing subsequence (LIS)\n\t// algorithm.\n\t//\n\t// the longest increasing subsequence is the list of nodes that can remain in place. Imagine going\n\t// from `1,2,3,4,5` to `4,5,1,2,3` where the numbers are not necessarily the keys, but the indices\n\t// corresponding to the keyed nodes in the old list (keyed nodes `e,d,c,b,a` => `b,a,e,d,c` would\n\t//  match the above lists, for example).\n\t//\n\t// In there are two increasing subsequences: `4,5` and `1,2,3`, the latter being the longest. We\n\t// can update those nodes without moving them, and only call `insertNode` on `4` and `5`.\n\t//\n\t// @localvoid adapted the algo to also support node deletions and insertions (the `lis` is actually\n\t// the longest increasing subsequence *of old nodes still present in the new list*).\n\t//\n\t// It is a general algorithm that is fireproof in all circumstances, but it requires the allocation\n\t// and the construction of a `key => oldIndex` map, and three arrays (one with `newIndex => oldIndex`,\n\t// the `LIS` and a temporary one to create the LIS).\n\t//\n\t// So we cheat where we can: if the tails of the lists are identical, they are guaranteed to be part of\n\t// the LIS and can be updated without moving them.\n\t//\n\t// If two nodes are swapped, they are guaranteed not to be part of the LIS, and must be moved (with\n\t// the exception of the last node if the list is fully reversed).\n\t//\n\t// ## Finding the next sibling.\n\t//\n\t// `updateNode()` and `createNode()` expect a nextSibling parameter to perform DOM operations.\n\t// When the list is being traversed top-down, at any index, the DOM nodes up to the previous\n\t// vnode reflect the content of the new list, whereas the rest of the DOM nodes reflect the old\n\t// list. The next sibling must be looked for in the old list using `getNextSibling(... oldStart + 1 ...)`.\n\t//\n\t// In the other scenarios (swaps, upwards traversal, map-based diff),\n\t// the new vnodes list is traversed upwards. The DOM nodes at the bottom of the list reflect the\n\t// bottom part of the new vnodes list, and we can use the `v.dom`  value of the previous node\n\t// as the next sibling (cached in the `nextSibling` variable).\n\n\n\t// ## DOM node moves\n\t//\n\t// In most scenarios `updateNode()` and `createNode()` perform the DOM operations. However,\n\t// this is not the case if the node moved (second and fourth part of the diff algo). We move\n\t// the old DOM nodes before updateNode runs because it enables us to use the cached `nextSibling`\n\t// variable rather than fetching it using `getNextSibling()`.\n\n\tfunction updateNodes(parent, old, vnodes, hooks, nextSibling, ns) {\n\t\tif (old === vnodes || old == null && vnodes == null) return\n\t\telse if (old == null || old.length === 0) createNodes(parent, vnodes, 0, vnodes.length, hooks, nextSibling, ns)\n\t\telse if (vnodes == null || vnodes.length === 0) removeNodes(parent, old, 0, old.length)\n\t\telse {\n\t\t\tvar isOldKeyed = old[0] != null && old[0].key != null\n\t\t\tvar isKeyed = vnodes[0] != null && vnodes[0].key != null\n\t\t\tvar start = 0, oldStart = 0\n\t\t\tif (!isOldKeyed) while (oldStart < old.length && old[oldStart] == null) oldStart++\n\t\t\tif (!isKeyed) while (start < vnodes.length && vnodes[start] == null) start++\n\t\t\tif (isOldKeyed !== isKeyed) {\n\t\t\t\tremoveNodes(parent, old, oldStart, old.length)\n\t\t\t\tcreateNodes(parent, vnodes, start, vnodes.length, hooks, nextSibling, ns)\n\t\t\t} else if (!isKeyed) {\n\t\t\t\t// Don't index past the end of either list (causes deopts).\n\t\t\t\tvar commonLength = old.length < vnodes.length ? old.length : vnodes.length\n\t\t\t\t// Rewind if necessary to the first non-null index on either side.\n\t\t\t\t// We could alternatively either explicitly create or remove nodes when `start !== oldStart`\n\t\t\t\t// but that would be optimizing for sparse lists which are more rare than dense ones.\n\t\t\t\tstart = start < oldStart ? start : oldStart\n\t\t\t\tfor (; start < commonLength; start++) {\n\t\t\t\t\to = old[start]\n\t\t\t\t\tv = vnodes[start]\n\t\t\t\t\tif (o === v || o == null && v == null) continue\n\t\t\t\t\telse if (o == null) createNode(parent, v, hooks, ns, getNextSibling(old, start + 1, nextSibling))\n\t\t\t\t\telse if (v == null) removeNode(parent, o)\n\t\t\t\t\telse updateNode(parent, o, v, hooks, getNextSibling(old, start + 1, nextSibling), ns)\n\t\t\t\t}\n\t\t\t\tif (old.length > commonLength) removeNodes(parent, old, start, old.length)\n\t\t\t\tif (vnodes.length > commonLength) createNodes(parent, vnodes, start, vnodes.length, hooks, nextSibling, ns)\n\t\t\t} else {\n\t\t\t\t// keyed diff\n\t\t\t\tvar oldEnd = old.length - 1, end = vnodes.length - 1, map, o, v, oe, ve, topSibling\n\n\t\t\t\t// bottom-up\n\t\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\t\toe = old[oldEnd]\n\t\t\t\t\tve = vnodes[end]\n\t\t\t\t\tif (oe.key !== ve.key) break\n\t\t\t\t\tif (oe !== ve) updateNode(parent, oe, ve, hooks, nextSibling, ns)\n\t\t\t\t\tif (ve.dom != null) nextSibling = ve.dom\n\t\t\t\t\toldEnd--, end--\n\t\t\t\t}\n\t\t\t\t// top-down\n\t\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\t\to = old[oldStart]\n\t\t\t\t\tv = vnodes[start]\n\t\t\t\t\tif (o.key !== v.key) break\n\t\t\t\t\toldStart++, start++\n\t\t\t\t\tif (o !== v) updateNode(parent, o, v, hooks, getNextSibling(old, oldStart, nextSibling), ns)\n\t\t\t\t}\n\t\t\t\t// swaps and list reversals\n\t\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\t\tif (start === end) break\n\t\t\t\t\tif (o.key !== ve.key || oe.key !== v.key) break\n\t\t\t\t\ttopSibling = getNextSibling(old, oldStart, nextSibling)\n\t\t\t\t\tmoveDOM(parent, oe, topSibling)\n\t\t\t\t\tif (oe !== v) updateNode(parent, oe, v, hooks, topSibling, ns)\n\t\t\t\t\tif (++start <= --end) moveDOM(parent, o, nextSibling)\n\t\t\t\t\tif (o !== ve) updateNode(parent, o, ve, hooks, nextSibling, ns)\n\t\t\t\t\tif (ve.dom != null) nextSibling = ve.dom\n\t\t\t\t\toldStart++; oldEnd--\n\t\t\t\t\toe = old[oldEnd]\n\t\t\t\t\tve = vnodes[end]\n\t\t\t\t\to = old[oldStart]\n\t\t\t\t\tv = vnodes[start]\n\t\t\t\t}\n\t\t\t\t// bottom up once again\n\t\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\t\tif (oe.key !== ve.key) break\n\t\t\t\t\tif (oe !== ve) updateNode(parent, oe, ve, hooks, nextSibling, ns)\n\t\t\t\t\tif (ve.dom != null) nextSibling = ve.dom\n\t\t\t\t\toldEnd--, end--\n\t\t\t\t\toe = old[oldEnd]\n\t\t\t\t\tve = vnodes[end]\n\t\t\t\t}\n\t\t\t\tif (start > end) removeNodes(parent, old, oldStart, oldEnd + 1)\n\t\t\t\telse if (oldStart > oldEnd) createNodes(parent, vnodes, start, end + 1, hooks, nextSibling, ns)\n\t\t\t\telse {\n\t\t\t\t\t// inspired by ivi https://github.com/ivijs/ivi/ by Boris Kaul\n\t\t\t\t\tvar originalNextSibling = nextSibling, vnodesLength = end - start + 1, oldIndices = new Array(vnodesLength), li=0, i=0, pos = 2147483647, matched = 0, map, lisIndices\n\t\t\t\t\tfor (i = 0; i < vnodesLength; i++) oldIndices[i] = -1\n\t\t\t\t\tfor (i = end; i >= start; i--) {\n\t\t\t\t\t\tif (map == null) map = getKeyMap(old, oldStart, oldEnd + 1)\n\t\t\t\t\t\tve = vnodes[i]\n\t\t\t\t\t\tvar oldIndex = map[ve.key]\n\t\t\t\t\t\tif (oldIndex != null) {\n\t\t\t\t\t\t\tpos = (oldIndex < pos) ? oldIndex : -1 // becomes -1 if nodes were re-ordered\n\t\t\t\t\t\t\toldIndices[i-start] = oldIndex\n\t\t\t\t\t\t\toe = old[oldIndex]\n\t\t\t\t\t\t\told[oldIndex] = null\n\t\t\t\t\t\t\tif (oe !== ve) updateNode(parent, oe, ve, hooks, nextSibling, ns)\n\t\t\t\t\t\t\tif (ve.dom != null) nextSibling = ve.dom\n\t\t\t\t\t\t\tmatched++\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tnextSibling = originalNextSibling\n\t\t\t\t\tif (matched !== oldEnd - oldStart + 1) removeNodes(parent, old, oldStart, oldEnd + 1)\n\t\t\t\t\tif (matched === 0) createNodes(parent, vnodes, start, end + 1, hooks, nextSibling, ns)\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (pos === -1) {\n\t\t\t\t\t\t\t// the indices of the indices of the items that are part of the\n\t\t\t\t\t\t\t// longest increasing subsequence in the oldIndices list\n\t\t\t\t\t\t\tlisIndices = makeLisIndices(oldIndices)\n\t\t\t\t\t\t\tli = lisIndices.length - 1\n\t\t\t\t\t\t\tfor (i = end; i >= start; i--) {\n\t\t\t\t\t\t\t\tv = vnodes[i]\n\t\t\t\t\t\t\t\tif (oldIndices[i-start] === -1) createNode(parent, v, hooks, ns, nextSibling)\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tif (lisIndices[li] === i - start) li--\n\t\t\t\t\t\t\t\t\telse moveDOM(parent, v, nextSibling)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (v.dom != null) nextSibling = vnodes[i].dom\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfor (i = end; i >= start; i--) {\n\t\t\t\t\t\t\t\tv = vnodes[i]\n\t\t\t\t\t\t\t\tif (oldIndices[i-start] === -1) createNode(parent, v, hooks, ns, nextSibling)\n\t\t\t\t\t\t\t\tif (v.dom != null) nextSibling = vnodes[i].dom\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfunction updateNode(parent, old, vnode, hooks, nextSibling, ns) {\n\t\tvar oldTag = old.tag, tag = vnode.tag\n\t\tif (oldTag === tag && old.is === vnode.is) {\n\t\t\tvnode.state = old.state\n\t\t\tvnode.events = old.events\n\t\t\tif (shouldNotUpdate(vnode, old)) return\n\t\t\tif (typeof oldTag === \"string\") {\n\t\t\t\tif (vnode.attrs != null) {\n\t\t\t\t\tupdateLifecycle(vnode.attrs, vnode, hooks)\n\t\t\t\t}\n\t\t\t\tswitch (oldTag) {\n\t\t\t\t\tcase \"#\": updateText(old, vnode); break\n\t\t\t\t\tcase \"<\": updateHTML(parent, old, vnode, ns, nextSibling); break\n\t\t\t\t\tcase \"[\": updateFragment(parent, old, vnode, hooks, nextSibling, ns); break\n\t\t\t\t\tdefault: updateElement(old, vnode, hooks, ns)\n\t\t\t\t}\n\t\t\t}\n\t\t\telse updateComponent(parent, old, vnode, hooks, nextSibling, ns)\n\t\t}\n\t\telse {\n\t\t\tremoveNode(parent, old)\n\t\t\tcreateNode(parent, vnode, hooks, ns, nextSibling)\n\t\t}\n\t}\n\tfunction updateText(old, vnode) {\n\t\tif (old.children.toString() !== vnode.children.toString()) {\n\t\t\told.dom.nodeValue = vnode.children\n\t\t}\n\t\tvnode.dom = old.dom\n\t}\n\tfunction updateHTML(parent, old, vnode, ns, nextSibling) {\n\t\tif (old.children !== vnode.children) {\n\t\t\tremoveDOM(parent, old)\n\t\t\tcreateHTML(parent, vnode, ns, nextSibling)\n\t\t}\n\t\telse {\n\t\t\tvnode.dom = old.dom\n\t\t\tvnode.domSize = old.domSize\n\t\t}\n\t}\n\tfunction updateFragment(parent, old, vnode, hooks, nextSibling, ns) {\n\t\tupdateNodes(parent, old.children, vnode.children, hooks, nextSibling, ns)\n\t\tvar domSize = 0, children = vnode.children\n\t\tvnode.dom = null\n\t\tif (children != null) {\n\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\tvar child = children[i]\n\t\t\t\tif (child != null && child.dom != null) {\n\t\t\t\t\tif (vnode.dom == null) vnode.dom = child.dom\n\t\t\t\t\tdomSize += child.domSize || 1\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (domSize !== 1) vnode.domSize = domSize\n\t\t}\n\t}\n\tfunction updateElement(old, vnode, hooks, ns) {\n\t\tvar element = vnode.dom = old.dom\n\t\tns = getNameSpace(vnode) || ns\n\n\t\tif (old.attrs != vnode.attrs || (vnode.attrs != null && !cachedAttrsIsStaticMap.get(vnode.attrs))) {\n\t\t\tupdateAttrs(vnode, old.attrs, vnode.attrs, ns)\n\t\t}\n\t\tif (!maybeSetContentEditable(vnode)) {\n\t\t\tupdateNodes(element, old.children, vnode.children, hooks, null, ns)\n\t\t}\n\t}\n\tfunction updateComponent(parent, old, vnode, hooks, nextSibling, ns) {\n\t\tvnode.instance = Vnode.normalize(callHook.call(vnode.state.view, vnode))\n\t\tif (vnode.instance === vnode) throw Error(\"A view cannot return the vnode it received as argument\")\n\t\tupdateLifecycle(vnode.state, vnode, hooks)\n\t\tif (vnode.attrs != null) updateLifecycle(vnode.attrs, vnode, hooks)\n\t\tif (vnode.instance != null) {\n\t\t\tif (old.instance == null) createNode(parent, vnode.instance, hooks, ns, nextSibling)\n\t\t\telse updateNode(parent, old.instance, vnode.instance, hooks, nextSibling, ns)\n\t\t\tvnode.dom = vnode.instance.dom\n\t\t\tvnode.domSize = vnode.instance.domSize\n\t\t}\n\t\telse if (old.instance != null) {\n\t\t\tremoveNode(parent, old.instance)\n\t\t\tvnode.dom = undefined\n\t\t\tvnode.domSize = 0\n\t\t}\n\t\telse {\n\t\t\tvnode.dom = old.dom\n\t\t\tvnode.domSize = old.domSize\n\t\t}\n\t}\n\tfunction getKeyMap(vnodes, start, end) {\n\t\tvar map = Object.create(null)\n\t\tfor (; start < end; start++) {\n\t\t\tvar vnode = vnodes[start]\n\t\t\tif (vnode != null) {\n\t\t\t\tvar key = vnode.key\n\t\t\t\tif (key != null) map[key] = start\n\t\t\t}\n\t\t}\n\t\treturn map\n\t}\n\t// Lifted from ivi https://github.com/ivijs/ivi/\n\t// takes a list of unique numbers (-1 is special and can\n\t// occur multiple times) and returns an array with the indices\n\t// of the items that are part of the longest increasing\n\t// subsequence\n\tvar lisTemp = []\n\tfunction makeLisIndices(a) {\n\t\tvar result = [0]\n\t\tvar u = 0, v = 0, i = 0\n\t\tvar il = lisTemp.length = a.length\n\t\tfor (var i = 0; i < il; i++) lisTemp[i] = a[i]\n\t\tfor (var i = 0; i < il; ++i) {\n\t\t\tif (a[i] === -1) continue\n\t\t\tvar j = result[result.length - 1]\n\t\t\tif (a[j] < a[i]) {\n\t\t\t\tlisTemp[i] = j\n\t\t\t\tresult.push(i)\n\t\t\t\tcontinue\n\t\t\t}\n\t\t\tu = 0\n\t\t\tv = result.length - 1\n\t\t\twhile (u < v) {\n\t\t\t\t// Fast integer average without overflow.\n\t\t\t\t// eslint-disable-next-line no-bitwise\n\t\t\t\tvar c = (u >>> 1) + (v >>> 1) + (u & v & 1)\n\t\t\t\tif (a[result[c]] < a[i]) {\n\t\t\t\t\tu = c + 1\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tv = c\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (a[i] < a[result[u]]) {\n\t\t\t\tif (u > 0) lisTemp[i] = result[u - 1]\n\t\t\t\tresult[u] = i\n\t\t\t}\n\t\t}\n\t\tu = result.length\n\t\tv = result[u - 1]\n\t\twhile (u-- > 0) {\n\t\t\tresult[u] = v\n\t\t\tv = lisTemp[v]\n\t\t}\n\t\tlisTemp.length = 0\n\t\treturn result\n\t}\n\n\tfunction getNextSibling(vnodes, i, nextSibling) {\n\t\tfor (; i < vnodes.length; i++) {\n\t\t\tif (vnodes[i] != null && vnodes[i].dom != null) return vnodes[i].dom\n\t\t}\n\t\treturn nextSibling\n\t}\n\n\t// This handles fragments with zombie children (removed from vdom, but persisted in DOM through onbeforeremove)\n\tfunction moveDOM(parent, vnode, nextSibling) {\n\t\tif (vnode.dom != null) {\n\t\t\tvar target\n\t\t\tif (vnode.domSize == null) {\n\t\t\t\t// don't allocate for the common case\n\t\t\t\ttarget = vnode.dom\n\t\t\t} else {\n\t\t\t\ttarget = getDocument(parent).createDocumentFragment()\n\t\t\t\tfor (var dom of domFor(vnode)) target.appendChild(dom)\n\t\t\t}\n\t\t\tinsertDOM(parent, target, nextSibling)\n\t\t}\n\t}\n\n\tfunction insertDOM(parent, dom, nextSibling) {\n\t\tif (nextSibling != null) parent.insertBefore(dom, nextSibling)\n\t\telse parent.appendChild(dom)\n\t}\n\n\tfunction maybeSetContentEditable(vnode) {\n\t\tif (vnode.attrs == null || (\n\t\t\tvnode.attrs.contenteditable == null && // attribute\n\t\t\tvnode.attrs.contentEditable == null // property\n\t\t)) return false\n\t\tvar children = vnode.children\n\t\tif (children != null && children.length === 1 && children[0].tag === \"<\") {\n\t\t\tvar content = children[0].children\n\t\t\tif (vnode.dom.innerHTML !== content) vnode.dom.innerHTML = content\n\t\t}\n\t\telse if (children != null && children.length !== 0) throw new Error(\"Child node of a contenteditable must be trusted.\")\n\t\treturn true\n\t}\n\n\t//remove\n\tfunction removeNodes(parent, vnodes, start, end) {\n\t\tfor (var i = start; i < end; i++) {\n\t\t\tvar vnode = vnodes[i]\n\t\t\tif (vnode != null) removeNode(parent, vnode)\n\t\t}\n\t}\n\tfunction tryBlockRemove(parent, vnode, source, counter) {\n\t\tvar original = vnode.state\n\t\tvar result = callHook.call(source.onbeforeremove, vnode)\n\t\tif (result == null) return\n\n\t\tvar generation = currentRender\n\t\tfor (var dom of domFor(vnode)) delayedRemoval.set(dom, generation)\n\t\tcounter.v++\n\n\t\tPromise.resolve(result).finally(function () {\n\t\t\tcheckState(vnode, original)\n\t\t\ttryResumeRemove(parent, vnode, counter)\n\t\t})\n\t}\n\tfunction tryResumeRemove(parent, vnode, counter) {\n\t\tif (--counter.v === 0) {\n\t\t\tonremove(vnode)\n\t\t\tremoveDOM(parent, vnode)\n\t\t}\n\t}\n\tfunction removeNode(parent, vnode) {\n\t\tvar counter = {v: 1}\n\t\tif (typeof vnode.tag !== \"string\" && typeof vnode.state.onbeforeremove === \"function\") tryBlockRemove(parent, vnode, vnode.state, counter)\n\t\tif (vnode.attrs && typeof vnode.attrs.onbeforeremove === \"function\") tryBlockRemove(parent, vnode, vnode.attrs, counter)\n\t\ttryResumeRemove(parent, vnode, counter)\n\t}\n\tfunction removeDOM(parent, vnode) {\n\t\tif (vnode.dom == null) return\n\t\tif (vnode.domSize == null) {\n\t\t\tparent.removeChild(vnode.dom)\n\t\t} else {\n\t\t\tfor (var dom of domFor(vnode)) parent.removeChild(dom)\n\t\t}\n\t}\n\n\tfunction onremove(vnode) {\n\t\tif (typeof vnode.tag !== \"string\" && typeof vnode.state.onremove === \"function\") callHook.call(vnode.state.onremove, vnode)\n\t\tif (vnode.attrs && typeof vnode.attrs.onremove === \"function\") callHook.call(vnode.attrs.onremove, vnode)\n\t\tif (typeof vnode.tag !== \"string\") {\n\t\t\tif (vnode.instance != null) onremove(vnode.instance)\n\t\t} else {\n\t\t\tif (vnode.events != null) vnode.events._ = null\n\t\t\tvar children = vnode.children\n\t\t\tif (Array.isArray(children)) {\n\t\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\t\tvar child = children[i]\n\t\t\t\t\tif (child != null) onremove(child)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t//attrs\n\tfunction setAttrs(vnode, attrs, ns) {\n\t\tfor (var key in attrs) {\n\t\t\tsetAttr(vnode, key, null, attrs[key], ns)\n\t\t}\n\t}\n\tfunction setAttr(vnode, key, old, value, ns) {\n\t\tif (key === \"key\" || value == null || isLifecycleMethod(key) || (old === value && !isFormAttribute(vnode, key)) && typeof value !== \"object\") return\n\t\tif (key[0] === \"o\" && key[1] === \"n\") return updateEvent(vnode, key, value)\n\t\tif (key.slice(0, 6) === \"xlink:\") vnode.dom.setAttributeNS(\"http://www.w3.org/1999/xlink\", key.slice(6), value)\n\t\telse if (key === \"style\") updateStyle(vnode.dom, old, value)\n\t\telse if (hasPropertyKey(vnode, key, ns)) {\n\t\t\tif (key === \"value\") {\n\t\t\t\t// Only do the coercion if we're actually going to check the value.\n\t\t\t\t/* eslint-disable no-implicit-coercion */\n\t\t\t\t//setting input[value] to same value by typing on focused element moves cursor to end in Chrome\n\t\t\t\t//setting input[type=file][value] to same value causes an error to be generated if it's non-empty\n\t\t\t\t//minlength/maxlength validation isn't performed on script-set values(#2256)\n\t\t\t\tif ((vnode.tag === \"input\" || vnode.tag === \"textarea\") && vnode.dom.value === \"\" + value) return\n\t\t\t\t//setting select[value] to same value while having select open blinks select dropdown in Chrome\n\t\t\t\tif (vnode.tag === \"select\" && old !== null && vnode.dom.value === \"\" + value) return\n\t\t\t\t//setting option[value] to same value while having select open blinks select dropdown in Chrome\n\t\t\t\tif (vnode.tag === \"option\" && old !== null && vnode.dom.value === \"\" + value) return\n\t\t\t\t//setting input[type=file][value] to different value is an error if it's non-empty\n\t\t\t\t// Not ideal, but it at least works around the most common source of uncaught exceptions for now.\n\t\t\t\tif (vnode.tag === \"input\" && vnode.attrs.type === \"file\" && \"\" + value !== \"\") { console.error(\"`value` is read-only on file inputs!\"); return }\n\t\t\t\t/* eslint-enable no-implicit-coercion */\n\t\t\t}\n\t\t\t// If you assign an input type that is not supported by IE 11 with an assignment expression, an error will occur.\n\t\t\tif (vnode.tag === \"input\" && key === \"type\") vnode.dom.setAttribute(key, value)\n\t\t\telse vnode.dom[key] = value\n\t\t} else {\n\t\t\tif (typeof value === \"boolean\") {\n\t\t\t\tif (value) vnode.dom.setAttribute(key, \"\")\n\t\t\t\telse vnode.dom.removeAttribute(key)\n\t\t\t}\n\t\t\telse vnode.dom.setAttribute(key === \"className\" ? \"class\" : key, value)\n\t\t}\n\t}\n\tfunction removeAttr(vnode, key, old, ns) {\n\t\tif (key === \"key\" || old == null || isLifecycleMethod(key)) return\n\t\tif (key[0] === \"o\" && key[1] === \"n\") updateEvent(vnode, key, undefined)\n\t\telse if (key === \"style\") updateStyle(vnode.dom, old, null)\n\t\telse if (\n\t\t\thasPropertyKey(vnode, key, ns)\n\t\t\t&& key !== \"className\"\n\t\t\t&& key !== \"title\" // creates \"null\" as title\n\t\t\t&& !(key === \"value\" && (\n\t\t\t\tvnode.tag === \"option\"\n\t\t\t\t|| vnode.tag === \"select\" && vnode.dom.selectedIndex === -1 && vnode.dom === activeElement(vnode.dom)\n\t\t\t))\n\t\t\t&& !(vnode.tag === \"input\" && key === \"type\")\n\t\t) {\n\t\t\tvnode.dom[key] = null\n\t\t} else {\n\t\t\tvar nsLastIndex = key.indexOf(\":\")\n\t\t\tif (nsLastIndex !== -1) key = key.slice(nsLastIndex + 1)\n\t\t\tif (old !== false) vnode.dom.removeAttribute(key === \"className\" ? \"class\" : key)\n\t\t}\n\t}\n\tfunction setLateSelectAttrs(vnode, attrs) {\n\t\tif (\"value\" in attrs) {\n\t\t\tif(attrs.value === null) {\n\t\t\t\tif (vnode.dom.selectedIndex !== -1) vnode.dom.value = null\n\t\t\t} else {\n\t\t\t\tvar normalized = \"\" + attrs.value // eslint-disable-line no-implicit-coercion\n\t\t\t\tif (vnode.dom.value !== normalized || vnode.dom.selectedIndex === -1) {\n\t\t\t\t\tvnode.dom.value = normalized\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (\"selectedIndex\" in attrs) setAttr(vnode, \"selectedIndex\", null, attrs.selectedIndex, undefined)\n\t}\n\tfunction updateAttrs(vnode, old, attrs, ns) {\n\t\t// Some attributes may NOT be case-sensitive (e.g. data-***),\n\t\t// so removal should be done first to prevent accidental removal for newly setting values.\n\t\tvar val\n\t\tif (old != null) {\n\t\t\tif (old === attrs && !cachedAttrsIsStaticMap.has(attrs)) {\n\t\t\t\tconsole.warn(\"Don't reuse attrs object, use new object for every redraw, this will throw in next major\")\n\t\t\t}\n\t\t\tfor (var key in old) {\n\t\t\t\tif (((val = old[key]) != null) && (attrs == null || attrs[key] == null)) {\n\t\t\t\t\tremoveAttr(vnode, key, val, ns)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (attrs != null) {\n\t\t\tfor (var key in attrs) {\n\t\t\t\tsetAttr(vnode, key, old && old[key], attrs[key], ns)\n\t\t\t}\n\t\t}\n\t}\n\tfunction isFormAttribute(vnode, attr) {\n\t\treturn attr === \"value\" || attr === \"checked\" || attr === \"selectedIndex\" || attr === \"selected\" && (vnode.dom === activeElement(vnode.dom) || vnode.tag === \"option\" && vnode.dom.parentNode === activeElement(vnode.dom))\n\t}\n\tfunction isLifecycleMethod(attr) {\n\t\treturn attr === \"oninit\" || attr === \"oncreate\" || attr === \"onupdate\" || attr === \"onremove\" || attr === \"onbeforeremove\" || attr === \"onbeforeupdate\"\n\t}\n\tfunction hasPropertyKey(vnode, key, ns) {\n\t\t// Filter out namespaced keys\n\t\treturn ns === undefined && (\n\t\t\t// If it's a custom element, just keep it.\n\t\t\tvnode.tag.indexOf(\"-\") > -1 || vnode.is ||\n\t\t\t// If it's a normal element, let's try to avoid a few browser bugs.\n\t\t\tkey !== \"href\" && key !== \"list\" && key !== \"form\" && key !== \"width\" && key !== \"height\"// && key !== \"type\"\n\t\t\t// Defer the property check until *after* we check everything.\n\t\t) && key in vnode.dom\n\t}\n\n\t//style\n\tfunction updateStyle(element, old, style) {\n\t\tif (old === style) {\n\t\t\t// Styles are equivalent, do nothing.\n\t\t} else if (style == null) {\n\t\t\t// New style is missing, just clear it.\n\t\t\telement.style = \"\"\n\t\t} else if (typeof style !== \"object\") {\n\t\t\t// New style is a string, let engine deal with patching.\n\t\t\telement.style = style\n\t\t} else if (old == null || typeof old !== \"object\") {\n\t\t\t// `old` is missing or a string, `style` is an object.\n\t\t\telement.style = \"\"\n\t\t\t// Add new style properties\n\t\t\tfor (var key in style) {\n\t\t\t\tvar value = style[key]\n\t\t\t\tif (value != null) {\n\t\t\t\t\tif (key.includes(\"-\")) element.style.setProperty(key, String(value))\n\t\t\t\t\telse element.style[key] = String(value)\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\t// Both old & new are (different) objects.\n\t\t\t// Remove style properties that no longer exist\n\t\t\t// Style properties may have two cases(dash-case and camelCase),\n\t\t\t// so removal should be done first to prevent accidental removal for newly setting values.\n\t\t\tfor (var key in old) {\n\t\t\t\tif (old[key] != null && style[key] == null) {\n\t\t\t\t\tif (key.includes(\"-\")) element.style.removeProperty(key)\n\t\t\t\t\telse element.style[key] = \"\"\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Update style properties that have changed\n\t\t\tfor (var key in style) {\n\t\t\t\tvar value = style[key]\n\t\t\t\tif (value != null && (value = String(value)) !== String(old[key])) {\n\t\t\t\t\tif (key.includes(\"-\")) element.style.setProperty(key, value)\n\t\t\t\t\telse element.style[key] = value\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Here's an explanation of how this works:\n\t// 1. The event names are always (by design) prefixed by `on`.\n\t// 2. The EventListener interface accepts either a function or an object\n\t//    with a `handleEvent` method.\n\t// 3. The object does not inherit from `Object.prototype`, to avoid\n\t//    any potential interference with that (e.g. setters).\n\t// 4. The event name is remapped to the handler before calling it.\n\t// 5. In function-based event handlers, `ev.target === this`. We replicate\n\t//    that below.\n\t// 6. In function-based event handlers, `return false` prevents the default\n\t//    action and stops event propagation. We replicate that below.\n\tfunction EventDict() {\n\t\t// Save this, so the current redraw is correctly tracked.\n\t\tthis._ = currentRedraw\n\t}\n\tEventDict.prototype = Object.create(null)\n\tEventDict.prototype.handleEvent = function (ev) {\n\t\tvar handler = this[\"on\" + ev.type]\n\t\tvar result\n\t\tif (typeof handler === \"function\") result = handler.call(ev.currentTarget, ev)\n\t\telse if (typeof handler.handleEvent === \"function\") handler.handleEvent(ev)\n\t\tvar self = this\n\t\tif (self._ != null) {\n\t\t\tif (ev.redraw !== false) (0, self._)()\n\t\t\tif (result != null && typeof result.then === \"function\") {\n\t\t\t\tPromise.resolve(result).then(function () {\n\t\t\t\t\tif (self._ != null && ev.redraw !== false) (0, self._)()\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t\tif (result === false) {\n\t\t\tev.preventDefault()\n\t\t\tev.stopPropagation()\n\t\t}\n\t}\n\n\t//event\n\tfunction updateEvent(vnode, key, value) {\n\t\tif (vnode.events != null) {\n\t\t\tvnode.events._ = currentRedraw\n\t\t\tif (vnode.events[key] === value) return\n\t\t\tif (value != null && (typeof value === \"function\" || typeof value === \"object\")) {\n\t\t\t\tif (vnode.events[key] == null) vnode.dom.addEventListener(key.slice(2), vnode.events, false)\n\t\t\t\tvnode.events[key] = value\n\t\t\t} else {\n\t\t\t\tif (vnode.events[key] != null) vnode.dom.removeEventListener(key.slice(2), vnode.events, false)\n\t\t\t\tvnode.events[key] = undefined\n\t\t\t}\n\t\t} else if (value != null && (typeof value === \"function\" || typeof value === \"object\")) {\n\t\t\tvnode.events = new EventDict()\n\t\t\tvnode.dom.addEventListener(key.slice(2), vnode.events, false)\n\t\t\tvnode.events[key] = value\n\t\t}\n\t}\n\n\t//lifecycle\n\tfunction initLifecycle(source, vnode, hooks) {\n\t\tif (typeof source.oninit === \"function\") callHook.call(source.oninit, vnode)\n\t\tif (typeof source.oncreate === \"function\") hooks.push(callHook.bind(source.oncreate, vnode))\n\t}\n\tfunction updateLifecycle(source, vnode, hooks) {\n\t\tif (typeof source.onupdate === \"function\") hooks.push(callHook.bind(source.onupdate, vnode))\n\t}\n\tfunction shouldNotUpdate(vnode, old) {\n\t\tdo {\n\t\t\tif (vnode.attrs != null && typeof vnode.attrs.onbeforeupdate === \"function\") {\n\t\t\t\tvar force = callHook.call(vnode.attrs.onbeforeupdate, vnode, old)\n\t\t\t\tif (force !== undefined && !force) break\n\t\t\t}\n\t\t\tif (typeof vnode.tag !== \"string\" && typeof vnode.state.onbeforeupdate === \"function\") {\n\t\t\t\tvar force = callHook.call(vnode.state.onbeforeupdate, vnode, old)\n\t\t\t\tif (force !== undefined && !force) break\n\t\t\t}\n\t\t\treturn false\n\t\t} while (false); // eslint-disable-line no-constant-condition\n\t\tvnode.dom = old.dom\n\t\tvnode.domSize = old.domSize\n\t\tvnode.instance = old.instance\n\t\t// One would think having the actual latest attributes would be ideal,\n\t\t// but it doesn't let us properly diff based on our current internal\n\t\t// representation. We have to save not only the old DOM info, but also\n\t\t// the attributes used to create it, as we diff *that*, not against the\n\t\t// DOM directly (with a few exceptions in `setAttr`). And, of course, we\n\t\t// need to save the children and text as they are conceptually not\n\t\t// unlike special \"attributes\" internally.\n\t\tvnode.attrs = old.attrs\n\t\tvnode.children = old.children\n\t\tvnode.text = old.text\n\t\treturn true\n\t}\n\n\tvar currentDOM\n\n\treturn function(dom, vnodes, redraw) {\n\t\tif (!dom) throw new TypeError(\"DOM element being rendered to does not exist.\")\n\t\tif (currentDOM != null && dom.contains(currentDOM)) {\n\t\t\tthrow new TypeError(\"Node is currently being rendered to and thus is locked.\")\n\t\t}\n\t\tvar prevRedraw = currentRedraw\n\t\tvar prevDOM = currentDOM\n\t\tvar hooks = []\n\t\tvar active = activeElement(dom)\n\t\tvar namespace = dom.namespaceURI\n\n\t\tcurrentDOM = dom\n\t\tcurrentRedraw = typeof redraw === \"function\" ? redraw : undefined\n\t\tcurrentRender = {}\n\t\ttry {\n\t\t\t// First time rendering into a node clears it out\n\t\t\tif (dom.vnodes == null) dom.textContent = \"\"\n\t\t\tvnodes = Vnode.normalizeChildren(Array.isArray(vnodes) ? vnodes : [vnodes])\n\t\t\tupdateNodes(dom, dom.vnodes, vnodes, hooks, null, namespace === \"http://www.w3.org/1999/xhtml\" ? undefined : namespace)\n\t\t\tdom.vnodes = vnodes\n\t\t\t// `document.activeElement` can return null: https://html.spec.whatwg.org/multipage/interaction.html#dom-document-activeelement\n\t\t\tif (active != null && activeElement(dom) !== active && typeof active.focus === \"function\") active.focus()\n\t\t\tfor (var i = 0; i < hooks.length; i++) hooks[i]()\n\t\t} finally {\n\t\t\tcurrentRedraw = prevRedraw\n\t\t\tcurrentDOM = prevDOM\n\t\t}\n\t}\n}\n","\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\n\nmodule.exports = function(render, schedule, console) {\n\tvar subscriptions = []\n\tvar pending = false\n\tvar offset = -1\n\n\tfunction sync() {\n\t\tfor (offset = 0; offset < subscriptions.length; offset += 2) {\n\t\t\ttry { render(subscriptions[offset], Vnode(subscriptions[offset + 1]), redraw) }\n\t\t\tcatch (e) { console.error(e) }\n\t\t}\n\t\toffset = -1\n\t}\n\n\tfunction redraw() {\n\t\tif (!pending) {\n\t\t\tpending = true\n\t\t\tschedule(function() {\n\t\t\t\tpending = false\n\t\t\t\tsync()\n\t\t\t})\n\t\t}\n\t}\n\n\tredraw.sync = sync\n\n\tfunction mount(root, component) {\n\t\tif (component != null && component.view == null && typeof component !== \"function\") {\n\t\t\tthrow new TypeError(\"m.mount expects a component, not a vnode.\")\n\t\t}\n\n\t\tvar index = subscriptions.indexOf(root)\n\t\tif (index >= 0) {\n\t\t\tsubscriptions.splice(index, 2)\n\t\t\tif (index <= offset) offset -= 2\n\t\t\trender(root, [])\n\t\t}\n\n\t\tif (component != null) {\n\t\t\tsubscriptions.push(root, component)\n\t\t\trender(root, Vnode(component), redraw)\n\t\t}\n\t}\n\n\treturn {mount: mount, redraw: redraw}\n}\n","\"use strict\"\n\nvar hyperscript = require(\"./hyperscript\")\nvar request = require(\"./request\")\nvar mountRedraw = require(\"./mount-redraw\")\nvar domFor = require(\"./render/domFor\")\n\nvar m = function m() { return hyperscript.apply(this, arguments) }\nm.m = hyperscript\nm.trust = hyperscript.trust\nm.fragment = hyperscript.fragment\nm.Fragment = \"[\"\nm.mount = mountRedraw.mount\nm.route = require(\"./route\")\nm.render = require(\"./render\")\nm.redraw = mountRedraw.redraw\nm.request = request.request\nm.parseQueryString = require(\"./querystring/parse\")\nm.buildQueryString = require(\"./querystring/build\")\nm.parsePathname = require(\"./pathname/parse\")\nm.buildPathname = require(\"./pathname/build\")\nm.vnode = require(\"./render/vnode\")\nm.censor = require(\"./util/censor\")\nm.domFor = domFor.domFor\n\nmodule.exports = m\n","\"use strict\"\n\nvar render = require(\"./render\")\n\nmodule.exports = require(\"./api/mount-redraw\")(render, typeof requestAnimationFrame !== \"undefined\" ? requestAnimationFrame : null, typeof console !== \"undefined\" ? console : null)\n","\"use strict\"\n\nvar mountRedraw = require(\"./mount-redraw\")\n\nmodule.exports = require(\"./api/router\")(typeof window !== \"undefined\" ? window : null, mountRedraw)\n","\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\nvar hyperscriptVnode = require(\"./hyperscriptVnode\")\n\nmodule.exports = function(attrs, ...children) {\n\tvar vnode = hyperscriptVnode(attrs, children)\n\n\tif (vnode.attrs == null) vnode.attrs = {}\n\tvnode.tag = \"[\"\n\tvnode.children = Vnode.normalizeChildren(vnode.children)\n\treturn vnode\n}\n","\"use strict\"\n\nvar parsePathname = require(\"./parse\")\n\n// Compiles a template into a function that takes a resolved path (without query\n// strings) and returns an object containing the template parameters with their\n// parsed values. This expects the input of the compiled template to be the\n// output of `parsePathname`. Note that it does *not* remove query parameters\n// specified in the template.\nmodule.exports = function(template) {\n\tvar templateData = parsePathname(template)\n\tvar templateKeys = Object.keys(templateData.params)\n\tvar keys = []\n\tvar regexp = new RegExp(\"^\" + templateData.path.replace(\n\t\t// I escape literal text so people can use things like `:file.:ext` or\n\t\t// `:lang-:locale` in routes. This is all merged into one pass so I\n\t\t// don't also accidentally escape `-` and make it harder to detect it to\n\t\t// ban it from template parameters.\n\t\t/:([^\\/.-]+)(\\.{3}|\\.(?!\\.)|-)?|[\\\\^$*+.()|\\[\\]{}]/g,\n\t\tfunction(m, key, extra) {\n\t\t\tif (key == null) return \"\\\\\" + m\n\t\t\tkeys.push({k: key, r: extra === \"...\"})\n\t\t\tif (extra === \"...\") return \"(.*)\"\n\t\t\tif (extra === \".\") return \"([^/]+)\\\\.\"\n\t\t\treturn \"([^/]+)\" + (extra || \"\")\n\t\t}\n\t) + \"\\\\/?$\")\n\treturn function(data) {\n\t\t// First, check the params. Usually, there isn't any, and it's just\n\t\t// checking a static set.\n\t\tfor (var i = 0; i < templateKeys.length; i++) {\n\t\t\tif (templateData.params[templateKeys[i]] !== data.params[templateKeys[i]]) return false\n\t\t}\n\t\t// If no interpolations exist, let's skip all the ceremony\n\t\tif (!keys.length) return regexp.test(data.path)\n\t\tvar values = regexp.exec(data.path)\n\t\tif (values == null) return false\n\t\tfor (var i = 0; i < keys.length; i++) {\n\t\t\tdata.params[keys[i].k] = keys[i].r ? values[i + 1] : decodeURIComponent(values[i + 1])\n\t\t}\n\t\treturn true\n\t}\n}\n","// This exists so I'm only saving it once.\n\"use strict\"\n\nmodule.exports = {}.hasOwnProperty\n","\"use strict\"\n\nvar delayedRemoval = new WeakMap\n\nfunction *domFor(vnode) {\n\t// To avoid unintended mangling of the internal bundler,\n\t// parameter destructuring is not used here.\n\tvar dom = vnode.dom\n\tvar domSize = vnode.domSize\n\tvar generation = delayedRemoval.get(dom)\n\tif (dom != null) do {\n\t\tvar nextSibling = dom.nextSibling\n\n\t\tif (delayedRemoval.get(dom) === generation) {\n\t\t\tyield dom\n\t\t\tdomSize--\n\t\t}\n\n\t\tdom = nextSibling\n\t}\n\twhile (domSize)\n}\n\nmodule.exports = {\n\tdelayedRemoval: delayedRemoval,\n\tdomFor: domFor,\n}\n","\"use strict\"\n\nvar hyperscript = require(\"./render/hyperscript\")\n\nhyperscript.trust = require(\"./render/trust\")\nhyperscript.fragment = require(\"./render/fragment\")\n\nmodule.exports = hyperscript\n","\"use strict\"\n\nvar mountRedraw = require(\"./mount-redraw\")\n\nmodule.exports = require(\"./request/request\")(typeof window !== \"undefined\" ? window : null, mountRedraw.redraw)\n","\"use strict\"\n\nfunction Vnode(tag, key, attrs, children, text, dom) {\n\treturn {tag: tag, key: key, attrs: attrs, children: children, text: text, dom: dom, is: undefined, domSize: undefined, state: undefined, events: undefined, instance: undefined}\n}\nVnode.normalize = function(node) {\n\tif (Array.isArray(node)) return Vnode(\"[\", undefined, undefined, Vnode.normalizeChildren(node), undefined, undefined)\n\tif (node == null || typeof node === \"boolean\") return null\n\tif (typeof node === \"object\") return node\n\treturn Vnode(\"#\", undefined, undefined, String(node), undefined, undefined)\n}\nVnode.normalizeChildren = function(input) {\n\tvar children = []\n\tif (input.length) {\n\t\tvar isKeyed = input[0] != null && input[0].key != null\n\t\t// Note: this is a *very* perf-sensitive check.\n\t\t// Fun fact: merging the loop like this is somehow faster than splitting\n\t\t// it, noticeably so.\n\t\tfor (var i = 1; i < input.length; i++) {\n\t\t\tif ((input[i] != null && input[i].key != null) !== isKeyed) {\n\t\t\t\tthrow new TypeError(\n\t\t\t\t\tisKeyed && (input[i] == null || typeof input[i] === \"boolean\")\n\t\t\t\t\t\t? \"In fragments, vnodes must either all have keys or none have keys. You may wish to consider using an explicit keyed empty fragment, m.fragment({key: ...}), instead of a hole.\"\n\t\t\t\t\t\t: \"In fragments, vnodes must either all have keys or none have keys.\"\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\t\tfor (var i = 0; i < input.length; i++) {\n\t\t\tchildren[i] = Vnode.normalize(input[i])\n\t\t}\n\t}\n\treturn children\n}\n\nmodule.exports = Vnode\n","\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\nvar m = require(\"../render/hyperscript\")\n\nvar buildPathname = require(\"../pathname/build\")\nvar parsePathname = require(\"../pathname/parse\")\nvar compileTemplate = require(\"../pathname/compileTemplate\")\nvar censor = require(\"../util/censor\")\n\nfunction decodeURIComponentSave(component) {\n\ttry {\n\t\treturn decodeURIComponent(component)\n\t} catch(e) {\n\t\treturn component\n\t}\n}\n\nmodule.exports = function($window, mountRedraw) {\n\tvar callAsync = $window == null\n\t\t// In case Mithril.js' loaded globally without the DOM, let's not break\n\t\t? null\n\t\t: typeof $window.setImmediate === \"function\" ? $window.setImmediate : $window.setTimeout\n\tvar p = Promise.resolve()\n\n\tvar scheduled = false\n\n\tvar ready = false\n\tvar hasBeenResolved = false\n\n\tvar dom, compiled, fallbackRoute\n\n\tvar currentResolver, component, attrs, currentPath, lastUpdate\n\n\tvar RouterRoot = {\n\t\tonremove: function() {\n\t\t\tready = hasBeenResolved = false\n\t\t\t$window.removeEventListener(\"popstate\", fireAsync, false)\n\t\t},\n\t\tview: function() {\n\t\t\t// The route has already been resolved.\n\t\t\t// Therefore, the following early return is not needed.\n\t\t\t// if (!hasBeenResolved) return\n\n\t\t\tvar vnode = Vnode(component, attrs.key, attrs)\n\t\t\tif (currentResolver) return currentResolver.render(vnode)\n\t\t\t// Wrap in a fragment to preserve existing key semantics\n\t\t\treturn [vnode]\n\t\t},\n\t}\n\n\tvar SKIP = route.SKIP = {}\n\n\tfunction resolveRoute() {\n\t\tscheduled = false\n\t\t// Consider the pathname holistically. The prefix might even be invalid,\n\t\t// but that's not our problem.\n\t\tvar prefix = $window.location.hash\n\t\tif (route.prefix[0] !== \"#\") {\n\t\t\tprefix = $window.location.search + prefix\n\t\t\tif (route.prefix[0] !== \"?\") {\n\t\t\t\tprefix = $window.location.pathname + prefix\n\t\t\t\tif (prefix[0] !== \"/\") prefix = \"/\" + prefix\n\t\t\t}\n\t\t}\n\t\t// This seemingly useless `.concat()` speeds up the tests quite a bit,\n\t\t// since the representation is consistently a relatively poorly\n\t\t// optimized cons string.\n\t\tvar path = prefix.concat()\n\t\t\t.replace(/(?:%[a-f89][a-f0-9])+/gim, decodeURIComponentSave)\n\t\t\t.slice(route.prefix.length)\n\t\tvar data = parsePathname(path)\n\n\t\tObject.assign(data.params, $window.history.state)\n\n\t\tfunction reject(e) {\n\t\t\tconsole.error(e)\n\t\t\troute.set(fallbackRoute, null, {replace: true})\n\t\t}\n\n\t\tloop(0)\n\t\tfunction loop(i) {\n\t\t\tfor (; i < compiled.length; i++) {\n\t\t\t\tif (compiled[i].check(data)) {\n\t\t\t\t\tvar payload = compiled[i].component\n\t\t\t\t\tvar matchedRoute = compiled[i].route\n\t\t\t\t\tvar localComp = payload\n\t\t\t\t\tvar update = lastUpdate = function(comp) {\n\t\t\t\t\t\tif (update !== lastUpdate) return\n\t\t\t\t\t\tif (comp === SKIP) return loop(i + 1)\n\t\t\t\t\t\tcomponent = comp != null && (typeof comp.view === \"function\" || typeof comp === \"function\")? comp : \"div\"\n\t\t\t\t\t\tattrs = data.params, currentPath = path, lastUpdate = null\n\t\t\t\t\t\tcurrentResolver = payload.render ? payload : null\n\t\t\t\t\t\tif (hasBeenResolved) mountRedraw.redraw()\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\thasBeenResolved = true\n\t\t\t\t\t\t\tmountRedraw.mount(dom, RouterRoot)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// There's no understating how much I *wish* I could\n\t\t\t\t\t// use `async`/`await` here...\n\t\t\t\t\tif (payload.view || typeof payload === \"function\") {\n\t\t\t\t\t\tpayload = {}\n\t\t\t\t\t\tupdate(localComp)\n\t\t\t\t\t}\n\t\t\t\t\telse if (payload.onmatch) {\n\t\t\t\t\t\tp.then(function () {\n\t\t\t\t\t\t\treturn payload.onmatch(data.params, path, matchedRoute)\n\t\t\t\t\t\t}).then(update, path === fallbackRoute ? null : reject)\n\t\t\t\t\t}\n\t\t\t\t\telse update(/* \"div\" */)\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (path === fallbackRoute) {\n\t\t\t\tthrow new Error(\"Could not resolve default route \" + fallbackRoute + \".\")\n\t\t\t}\n\t\t\troute.set(fallbackRoute, null, {replace: true})\n\t\t}\n\t}\n\n\tfunction fireAsync() {\n\t\tif (!scheduled) {\n\t\t\tscheduled = true\n\t\t\t// TODO: just do `mountRedraw.redraw()` here and elide the timer\n\t\t\t// dependency. Note that this will muck with tests a *lot*, so it's\n\t\t\t// not as easy of a change as it sounds.\n\t\t\tcallAsync(resolveRoute)\n\t\t}\n\t}\n\n\tfunction route(root, defaultRoute, routes) {\n\t\tif (!root) throw new TypeError(\"DOM element being rendered to does not exist.\")\n\n\t\tcompiled = Object.keys(routes).map(function(route) {\n\t\t\tif (route[0] !== \"/\") throw new SyntaxError(\"Routes must start with a '/'.\")\n\t\t\tif ((/:([^\\/\\.-]+)(\\.{3})?:/).test(route)) {\n\t\t\t\tthrow new SyntaxError(\"Route parameter names must be separated with either '/', '.', or '-'.\")\n\t\t\t}\n\t\t\treturn {\n\t\t\t\troute: route,\n\t\t\t\tcomponent: routes[route],\n\t\t\t\tcheck: compileTemplate(route),\n\t\t\t}\n\t\t})\n\t\tfallbackRoute = defaultRoute\n\t\tif (defaultRoute != null) {\n\t\t\tvar defaultData = parsePathname(defaultRoute)\n\n\t\t\tif (!compiled.some(function (i) { return i.check(defaultData) })) {\n\t\t\t\tthrow new ReferenceError(\"Default route doesn't match any known routes.\")\n\t\t\t}\n\t\t}\n\t\tdom = root\n\n\t\t$window.addEventListener(\"popstate\", fireAsync, false)\n\n\t\tready = true\n\n\t\t// The RouterRoot component is mounted when the route is first resolved.\n\t\tresolveRoute()\n\t}\n\troute.set = function(path, data, options) {\n\t\tif (lastUpdate != null) {\n\t\t\toptions = options || {}\n\t\t\toptions.replace = true\n\t\t}\n\t\tlastUpdate = null\n\n\t\tpath = buildPathname(path, data)\n\t\tif (ready) {\n\t\t\tfireAsync()\n\t\t\tvar state = options ? options.state : null\n\t\t\tvar title = options ? options.title : null\n\t\t\tif (options && options.replace) $window.history.replaceState(state, title, route.prefix + path)\n\t\t\telse $window.history.pushState(state, title, route.prefix + path)\n\t\t}\n\t\telse {\n\t\t\t$window.location.href = route.prefix + path\n\t\t}\n\t}\n\troute.get = function() {return currentPath}\n\troute.prefix = \"#!\"\n\troute.Link = {\n\t\tview: function(vnode) {\n\t\t\t// Omit the used parameters from the rendered element - they are\n\t\t\t// internal. Also, censor the various lifecycle methods.\n\t\t\t//\n\t\t\t// We don't strip the other parameters because for convenience we\n\t\t\t// let them be specified in the selector as well.\n\t\t\tvar child = m(\n\t\t\t\tvnode.attrs.selector || \"a\",\n\t\t\t\tcensor(vnode.attrs, [\"options\", \"params\", \"selector\", \"onclick\"]),\n\t\t\t\tvnode.children\n\t\t\t)\n\t\t\tvar options, onclick, href\n\n\t\t\t// Let's provide a *right* way to disable a route link, rather than\n\t\t\t// letting people screw up accessibility on accident.\n\t\t\t//\n\t\t\t// The attribute is coerced so users don't get surprised over\n\t\t\t// `disabled: 0` resulting in a button that's somehow routable\n\t\t\t// despite being visibly disabled.\n\t\t\tif (child.attrs.disabled = Boolean(child.attrs.disabled)) {\n\t\t\t\tchild.attrs.href = null\n\t\t\t\tchild.attrs[\"aria-disabled\"] = \"true\"\n\t\t\t\t// If you *really* do want add `onclick` on a disabled link, use\n\t\t\t\t// an `oncreate` hook to add it.\n\t\t\t} else {\n\t\t\t\toptions = vnode.attrs.options\n\t\t\t\tonclick = vnode.attrs.onclick\n\t\t\t\t// Easier to build it now to keep it isomorphic.\n\t\t\t\thref = buildPathname(child.attrs.href, vnode.attrs.params)\n\t\t\t\tchild.attrs.href = route.prefix + href\n\t\t\t\tchild.attrs.onclick = function(e) {\n\t\t\t\t\tvar result\n\t\t\t\t\tif (typeof onclick === \"function\") {\n\t\t\t\t\t\tresult = onclick.call(e.currentTarget, e)\n\t\t\t\t\t} else if (onclick == null || typeof onclick !== \"object\") {\n\t\t\t\t\t\t// do nothing\n\t\t\t\t\t} else if (typeof onclick.handleEvent === \"function\") {\n\t\t\t\t\t\tonclick.handleEvent(e)\n\t\t\t\t\t}\n\n\t\t\t\t\t// Adapted from React Router's implementation:\n\t\t\t\t\t// https://github.com/ReactTraining/react-router/blob/520a0acd48ae1b066eb0b07d6d4d1790a1d02482/packages/react-router-dom/modules/Link.js\n\t\t\t\t\t//\n\t\t\t\t\t// Try to be flexible and intuitive in how we handle links.\n\t\t\t\t\t// Fun fact: links aren't as obvious to get right as you\n\t\t\t\t\t// would expect. There's a lot more valid ways to click a\n\t\t\t\t\t// link than this, and one might want to not simply click a\n\t\t\t\t\t// link, but right click or command-click it to copy the\n\t\t\t\t\t// link target, etc. Nope, this isn't just for blind people.\n\t\t\t\t\tif (\n\t\t\t\t\t\t// Skip if `onclick` prevented default\n\t\t\t\t\t\tresult !== false && !e.defaultPrevented &&\n\t\t\t\t\t\t// Ignore everything but left clicks\n\t\t\t\t\t\t(e.button === 0 || e.which === 0 || e.which === 1) &&\n\t\t\t\t\t\t// Let the browser handle `target=_blank`, etc.\n\t\t\t\t\t\t(!e.currentTarget.target || e.currentTarget.target === \"_self\") &&\n\t\t\t\t\t\t// No modifier keys\n\t\t\t\t\t\t!e.ctrlKey && !e.metaKey && !e.shiftKey && !e.altKey\n\t\t\t\t\t) {\n\t\t\t\t\t\te.preventDefault()\n\t\t\t\t\t\te.redraw = false\n\t\t\t\t\t\troute.set(href, null, options)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn child\n\t\t},\n\t}\n\troute.param = function(key) {\n\t\treturn attrs && key != null ? attrs[key] : attrs\n\t}\n\n\treturn route\n}\n","\"use strict\"\n\nvar buildPathname = require(\"../pathname/build\")\nvar hasOwn = require(\"../util/hasOwn\")\n\nmodule.exports = function($window, oncompletion) {\n\tfunction PromiseProxy(executor) {\n\t\treturn new Promise(executor)\n\t}\n\n\tfunction makeRequest(url, args) {\n\t\treturn new Promise(function(resolve, reject) {\n\t\t\turl = buildPathname(url, args.params)\n\t\t\tvar method = args.method != null ? args.method.toUpperCase() : \"GET\"\n\t\t\tvar body = args.body\n\t\t\tvar assumeJSON = (args.serialize == null || args.serialize === JSON.serialize) && !(body instanceof $window.FormData || body instanceof $window.URLSearchParams)\n\t\t\tvar responseType = args.responseType || (typeof args.extract === \"function\" ? \"\" : \"json\")\n\n\t\t\tvar xhr = new $window.XMLHttpRequest(), aborted = false, isTimeout = false\n\t\t\tvar original = xhr, replacedAbort\n\t\t\tvar abort = xhr.abort\n\n\t\t\txhr.abort = function() {\n\t\t\t\taborted = true\n\t\t\t\tabort.call(this)\n\t\t\t}\n\n\t\t\txhr.open(method, url, args.async !== false, typeof args.user === \"string\" ? args.user : undefined, typeof args.password === \"string\" ? args.password : undefined)\n\n\t\t\tif (assumeJSON && body != null && !hasHeader(args, \"content-type\")) {\n\t\t\t\txhr.setRequestHeader(\"Content-Type\", \"application/json; charset=utf-8\")\n\t\t\t}\n\t\t\tif (typeof args.deserialize !== \"function\" && !hasHeader(args, \"accept\")) {\n\t\t\t\txhr.setRequestHeader(\"Accept\", \"application/json, text/*\")\n\t\t\t}\n\t\t\tif (args.withCredentials) xhr.withCredentials = args.withCredentials\n\t\t\tif (args.timeout) xhr.timeout = args.timeout\n\t\t\txhr.responseType = responseType\n\n\t\t\tfor (var key in args.headers) {\n\t\t\t\tif (hasOwn.call(args.headers, key)) {\n\t\t\t\t\txhr.setRequestHeader(key, args.headers[key])\n\t\t\t\t}\n\t\t\t}\n\n\t\t\txhr.onreadystatechange = function(ev) {\n\t\t\t\t// Don't throw errors on xhr.abort().\n\t\t\t\tif (aborted) return\n\n\t\t\t\tif (ev.target.readyState === 4) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar success = (ev.target.status >= 200 && ev.target.status < 300) || ev.target.status === 304 || (/^file:\\/\\//i).test(url)\n\t\t\t\t\t\t// When the response type isn't \"\" or \"text\",\n\t\t\t\t\t\t// `xhr.responseText` is the wrong thing to use.\n\t\t\t\t\t\t// Browsers do the right thing and throw here, and we\n\t\t\t\t\t\t// should honor that and do the right thing by\n\t\t\t\t\t\t// preferring `xhr.response` where possible/practical.\n\t\t\t\t\t\tvar response = ev.target.response, message\n\n\t\t\t\t\t\tif (responseType === \"json\") {\n\t\t\t\t\t\t\t// For IE and Edge, which don't implement\n\t\t\t\t\t\t\t// `responseType: \"json\"`.\n\t\t\t\t\t\t\tif (!ev.target.responseType && typeof args.extract !== \"function\") {\n\t\t\t\t\t\t\t\t// Handle no-content which will not parse.\n\t\t\t\t\t\t\t\ttry { response = JSON.parse(ev.target.responseText) }\n\t\t\t\t\t\t\t\tcatch (e) { response = null }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (!responseType || responseType === \"text\") {\n\t\t\t\t\t\t\t// Only use this default if it's text. If a parsed\n\t\t\t\t\t\t\t// document is needed on old IE and friends (all\n\t\t\t\t\t\t\t// unsupported), the user should use a custom\n\t\t\t\t\t\t\t// `config` instead. They're already using this at\n\t\t\t\t\t\t\t// their own risk.\n\t\t\t\t\t\t\tif (response == null) response = ev.target.responseText\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (typeof args.extract === \"function\") {\n\t\t\t\t\t\t\tresponse = args.extract(ev.target, args)\n\t\t\t\t\t\t\tsuccess = true\n\t\t\t\t\t\t} else if (typeof args.deserialize === \"function\") {\n\t\t\t\t\t\t\tresponse = args.deserialize(response)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (success) {\n\t\t\t\t\t\t\tif (typeof args.type === \"function\") {\n\t\t\t\t\t\t\t\tif (Array.isArray(response)) {\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < response.length; i++) {\n\t\t\t\t\t\t\t\t\t\tresponse[i] = new args.type(response[i])\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse response = new args.type(response)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tresolve(response)\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tvar completeErrorResponse = function() {\n\t\t\t\t\t\t\t\ttry { message = ev.target.responseText }\n\t\t\t\t\t\t\t\tcatch (e) { message = response }\n\t\t\t\t\t\t\t\tvar error = new Error(message)\n\t\t\t\t\t\t\t\terror.code = ev.target.status\n\t\t\t\t\t\t\t\terror.response = response\n\t\t\t\t\t\t\t\treject(error)\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (xhr.status === 0) {\n\t\t\t\t\t\t\t\t// Use setTimeout to push this code block onto the event queue\n\t\t\t\t\t\t\t\t// This allows `xhr.ontimeout` to run in the case that there is a timeout\n\t\t\t\t\t\t\t\t// Without this setTimeout, `xhr.ontimeout` doesn't have a chance to reject\n\t\t\t\t\t\t\t\t// as `xhr.onreadystatechange` will run before it\n\t\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\t\tif (isTimeout) return\n\t\t\t\t\t\t\t\t\tcompleteErrorResponse()\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t} else completeErrorResponse()\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcatch (e) {\n\t\t\t\t\t\treject(e)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\txhr.ontimeout = function (ev) {\n\t\t\t\tisTimeout = true\n\t\t\t\tvar error = new Error(\"Request timed out\")\n\t\t\t\terror.code = ev.target.status\n\t\t\t\treject(error)\n\t\t\t}\n\n\t\t\tif (typeof args.config === \"function\") {\n\t\t\t\txhr = args.config(xhr, args, url) || xhr\n\n\t\t\t\t// Propagate the `abort` to any replacement XHR as well.\n\t\t\t\tif (xhr !== original) {\n\t\t\t\t\treplacedAbort = xhr.abort\n\t\t\t\t\txhr.abort = function() {\n\t\t\t\t\t\taborted = true\n\t\t\t\t\t\treplacedAbort.call(this)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (body == null) xhr.send()\n\t\t\telse if (typeof args.serialize === \"function\") xhr.send(args.serialize(body))\n\t\t\telse if (body instanceof $window.FormData || body instanceof $window.URLSearchParams) xhr.send(body)\n\t\t\telse xhr.send(JSON.stringify(body))\n\t\t})\n\t}\n\n\t// In case the global Promise is some userland library's where they rely on\n\t// `foo instanceof this.constructor`, `this.constructor.resolve(value)`, or\n\t// similar. Let's *not* break them.\n\tPromiseProxy.prototype = Promise.prototype\n\tPromiseProxy.__proto__ = Promise // eslint-disable-line no-proto\n\n\tfunction hasHeader(args, name) {\n\t\tfor (var key in args.headers) {\n\t\t\tif (hasOwn.call(args.headers, key) && key.toLowerCase() === name) return true\n\t\t}\n\t\treturn false\n\t}\n\n\treturn {\n\t\trequest: function(url, args) {\n\t\t\tif (typeof url !== \"string\") { args = url; url = url.url }\n\t\t\telse if (args == null) args = {}\n\t\t\tvar promise = makeRequest(url, args)\n\t\t\tif (args.background === true) return promise\n\t\t\tvar count = 0\n\t\t\tfunction complete() {\n\t\t\t\tif (--count === 0 && typeof oncompletion === \"function\") oncompletion()\n\t\t\t}\n\n\t\t\treturn wrap(promise)\n\n\t\t\tfunction wrap(promise) {\n\t\t\t\tvar then = promise.then\n\t\t\t\t// Set the constructor, so engines know to not await or resolve\n\t\t\t\t// this as a native promise. At the time of writing, this is\n\t\t\t\t// only necessary for V8, but their behavior is the correct\n\t\t\t\t// behavior per spec. See this spec issue for more details:\n\t\t\t\t// https://github.com/tc39/ecma262/issues/1577. Also, see the\n\t\t\t\t// corresponding comment in `request/tests/test-request.js` for\n\t\t\t\t// a bit more background on the issue at hand.\n\t\t\t\tpromise.constructor = PromiseProxy\n\t\t\t\tpromise.then = function() {\n\t\t\t\t\tcount++\n\t\t\t\t\tvar next = then.apply(promise, arguments)\n\t\t\t\t\tnext.then(complete, function(e) {\n\t\t\t\t\t\tcomplete()\n\t\t\t\t\t\tif (count === 0) throw e\n\t\t\t\t\t})\n\t\t\t\t\treturn wrap(next)\n\t\t\t\t}\n\t\t\t\treturn promise\n\t\t\t}\n\t\t}\n\t}\n}\n","\"use strict\"\n\nvar buildQueryString = require(\"../querystring/build\")\n\n// Returns `path` from `template` + `params`\nmodule.exports = function(template, params) {\n\tif ((/:([^\\/\\.-]+)(\\.{3})?:/).test(template)) {\n\t\tthrow new SyntaxError(\"Template parameter names must be separated by either a '/', '-', or '.'.\")\n\t}\n\tif (params == null) return template\n\tvar queryIndex = template.indexOf(\"?\")\n\tvar hashIndex = template.indexOf(\"#\")\n\tvar queryEnd = hashIndex < 0 ? template.length : hashIndex\n\tvar pathEnd = queryIndex < 0 ? queryEnd : queryIndex\n\tvar path = template.slice(0, pathEnd)\n\tvar query = {}\n\n\tObject.assign(query, params)\n\n\tvar resolved = path.replace(/:([^\\/\\.-]+)(\\.{3})?/g, function(m, key, variadic) {\n\t\tdelete query[key]\n\t\t// If no such parameter exists, don't interpolate it.\n\t\tif (params[key] == null) return m\n\t\t// Escape normal parameters, but not variadic ones.\n\t\treturn variadic ? params[key] : encodeURIComponent(String(params[key]))\n\t})\n\n\t// In case the template substitution adds new query/hash parameters.\n\tvar newQueryIndex = resolved.indexOf(\"?\")\n\tvar newHashIndex = resolved.indexOf(\"#\")\n\tvar newQueryEnd = newHashIndex < 0 ? resolved.length : newHashIndex\n\tvar newPathEnd = newQueryIndex < 0 ? newQueryEnd : newQueryIndex\n\tvar result = resolved.slice(0, newPathEnd)\n\n\tif (queryIndex >= 0) result += template.slice(queryIndex, queryEnd)\n\tif (newQueryIndex >= 0) result += (queryIndex < 0 ? \"?\" : \"&\") + resolved.slice(newQueryIndex, newQueryEnd)\n\tvar querystring = buildQueryString(query)\n\tif (querystring) result += (queryIndex < 0 && newQueryIndex < 0 ? \"?\" : \"&\") + querystring\n\tif (hashIndex >= 0) result += template.slice(hashIndex)\n\tif (newHashIndex >= 0) result += (hashIndex < 0 ? \"\" : \"&\") + resolved.slice(newHashIndex)\n\treturn result\n}\n","\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\nvar hyperscriptVnode = require(\"./hyperscriptVnode\")\nvar hasOwn = require(\"../util/hasOwn\")\nvar emptyAttrs = require(\"./emptyAttrs\")\nvar cachedAttrsIsStaticMap = require(\"./cachedAttrsIsStaticMap\")\n\nvar selectorParser = /(?:(^|#|\\.)([^#\\.\\[\\]]+))|(\\[(.+?)(?:\\s*=\\s*(\"|'|)((?:\\\\[\"'\\]]|.)*?)\\5)?\\])/g\nvar selectorCache = Object.create(null)\n\nfunction isEmpty(object) {\n\tfor (var key in object) if (hasOwn.call(object, key)) return false\n\treturn true\n}\n\nfunction isFormAttributeKey(key) {\n\treturn key === \"value\" || key === \"checked\" || key === \"selectedIndex\" || key === \"selected\"\n}\n\nfunction compileSelector(selector) {\n\tvar match, tag = \"div\", classes = [], attrs = {}, isStatic = true\n\twhile (match = selectorParser.exec(selector)) {\n\t\tvar type = match[1], value = match[2]\n\t\tif (type === \"\" && value !== \"\") tag = value\n\t\telse if (type === \"#\") attrs.id = value\n\t\telse if (type === \".\") classes.push(value)\n\t\telse if (match[3][0] === \"[\") {\n\t\t\tvar attrValue = match[6]\n\t\t\tif (attrValue) attrValue = attrValue.replace(/\\\\([\"'])/g, \"$1\").replace(/\\\\\\\\/g, \"\\\\\")\n\t\t\tif (match[4] === \"class\") classes.push(attrValue)\n\t\t\telse {\n\t\t\t\tattrs[match[4]] = attrValue === \"\" ? attrValue : attrValue || true\n\t\t\t\tif (isFormAttributeKey(match[4])) isStatic = false\n\t\t\t}\n\t\t}\n\t}\n\tif (classes.length > 0) attrs.className = classes.join(\" \")\n\tif (isEmpty(attrs)) attrs = emptyAttrs\n\telse cachedAttrsIsStaticMap.set(attrs, isStatic)\n\treturn selectorCache[selector] = {tag: tag, attrs: attrs, is: attrs.is}\n}\n\nfunction execSelector(state, vnode) {\n\tvnode.tag = state.tag\n\n\tvar attrs = vnode.attrs\n\tif (attrs == null) {\n\t\tvnode.attrs = state.attrs\n\t\tvnode.is = state.is\n\t\treturn vnode\n\t}\n\n\tvar hasClass = hasOwn.call(attrs, \"class\")\n\tvar className = hasClass ? attrs.class : attrs.className\n\n\tif (state.attrs !== emptyAttrs) {\n\t\tattrs = Object.assign({}, state.attrs, attrs)\n\n\t\tif (className != null || state.attrs.className != null) attrs.className =\n\t\t\tclassName != null\n\t\t\t\t? state.attrs.className != null\n\t\t\t\t\t? String(state.attrs.className) + \" \" + String(className)\n\t\t\t\t\t: className\n\t\t\t\t: state.attrs.className\n\t} else {\n\t\tif (className != null) attrs.className = className\n\t}\n\n\tif (hasClass) attrs.class = null\n\n\t// workaround for #2622 (reorder keys in attrs to set \"type\" first)\n\t// The DOM does things to inputs based on the \"type\", so it needs set first.\n\t// See: https://github.com/MithrilJS/mithril.js/issues/2622\n\tif (state.tag === \"input\" && hasOwn.call(attrs, \"type\")) {\n\t\tattrs = Object.assign({type: attrs.type}, attrs)\n\t}\n\n\t// This reduces the complexity of the evaluation of \"is\" within the render function.\n\tvnode.is = attrs.is\n\n\tvnode.attrs = attrs\n\n\treturn vnode\n}\n\nfunction hyperscript(selector, attrs, ...children) {\n\tif (selector == null || typeof selector !== \"string\" && typeof selector !== \"function\" && typeof selector.view !== \"function\") {\n\t\tthrow Error(\"The selector must be either a string or a component.\");\n\t}\n\n\tvar vnode = hyperscriptVnode(attrs, children)\n\n\tif (typeof selector === \"string\") {\n\t\tvnode.children = Vnode.normalizeChildren(vnode.children)\n\t\tif (selector !== \"[\") return execSelector(selectorCache[selector] || compileSelector(selector), vnode)\n\t}\n\n\tif (vnode.attrs == null) vnode.attrs = {}\n\tvnode.tag = selector\n\treturn vnode\n}\n\nmodule.exports = hyperscript\n","\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\n\n// Note: the processing of variadic parameters is perf-sensitive.\n//\n// In native ES6, it might be preferable to define hyperscript and fragment\n// factories with a final ...args parameter and call hyperscriptVnode(...args),\n// since modern engines can optimize spread calls.\n//\n// However, benchmarks showed this was not faster. As a result, spread is used\n// only in the parameter lists of hyperscript and fragment, while an array is\n// passed to hyperscriptVnode.\nmodule.exports = function(attrs, children) {\n\tif (attrs == null || typeof attrs === \"object\" && attrs.tag == null && !Array.isArray(attrs)) {\n\t\tif (children.length === 1 && Array.isArray(children[0])) children = children[0]\n\t} else {\n\t\tchildren = children.length === 0 && Array.isArray(attrs) ? attrs : [attrs, ...children]\n\t\tattrs = undefined\n\t}\n\n\treturn Vnode(\"\", attrs && attrs.key, attrs, children)\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\tflarum.reg._webpack_runtimes[\"capybash-magicslider\"] ||= __webpack_require__;// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/app');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/extend');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/components/IndexPage');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/components/WelcomeHero');","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperty(e, r, t) {\n  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\nexport { _defineProperty as default };","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nexport { toPropertyKey as default };","import _typeof from \"./typeof.js\";\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nexport { toPrimitive as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/Component');","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport Component from 'flarum/common/Component';\nimport m from 'mithril';\nexport default class MagicSlider extends Component {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"index\", 0);\n    _defineProperty(this, \"interval\", void 0);\n    _defineProperty(this, \"touchStartX\", null);\n    _defineProperty(this, \"isMobile\", typeof window !== 'undefined' && !!window.matchMedia && window.matchMedia('(max-width: 768px)').matches);\n    _defineProperty(this, \"mq\", void 0);\n    _defineProperty(this, \"mqHandler\", void 0);\n  }\n  oncreate(vnode) {\n    const ms = Number(vnode.attrs.autoplayMs || 0);\n    if (vnode.attrs.slides.length > 1 && ms > 0) {\n      this.interval = window.setInterval(() => {\n        this.next(vnode.attrs.slides.length);\n        m.redraw();\n      }, ms);\n    }\n    if (window.matchMedia) {\n      this.mq = window.matchMedia('(max-width: 768px)');\n      this.mqHandler = () => {\n        var _this$mq;\n        this.isMobile = !!((_this$mq = this.mq) != null && _this$mq.matches);\n        m.redraw();\n      };\n      this.mq.addEventListener ? this.mq.addEventListener('change', this.mqHandler) : this.mq.addListener(this.mqHandler);\n    }\n  }\n  onremove() {\n    if (this.interval) {\n      window.clearInterval(this.interval);\n      this.interval = undefined;\n    }\n    if (this.mq && this.mqHandler) {\n      this.mq.removeEventListener ? this.mq.removeEventListener('change', this.mqHandler) : this.mq.removeListener(this.mqHandler);\n      this.mqHandler = undefined;\n    }\n  }\n  next(len) {\n    this.index = (this.index + 1) % len;\n  }\n  prev(len) {\n    this.index = (this.index - 1 + len) % len;\n  }\n  onPointerDown(e) {\n    var _e$clientX;\n    this.touchStartX = (_e$clientX = e.clientX) != null ? _e$clientX : 0;\n  }\n  onPointerUp(e, len) {\n    var _e$clientX2;\n    if (this.touchStartX === null) return;\n    const dx = ((_e$clientX2 = e.clientX) != null ? _e$clientX2 : 0) - this.touchStartX;\n    this.touchStartX = null;\n    if (Math.abs(dx) > 40) {\n      dx < 0 ? this.next(len) : this.prev(len);\n      m.redraw();\n    }\n  }\n  viewInner(vnode) {\n    const {\n      slides,\n      heightDesktop,\n      heightMobile,\n      paddingDesktop,\n      paddingMobile,\n      radiusDesktop,\n      radiusMobile\n    } = vnode.attrs;\n    if (!slides.length) return null;\n    const offsetPct = -(this.index * 100);\n    const pad = this.isMobile ? paddingMobile : paddingDesktop;\n    const rad = this.isMobile ? radiusMobile : radiusDesktop;\n    return m(\"div\", {\n      className: \"MagicSlider-wrap\",\n      style: {\n        padding: \"\".concat(pad, \"px\")\n      }\n    }, m(\"div\", {\n      className: \"MagicSlider\",\n      style: {\n        borderRadius: \"\".concat(rad, \"px\"),\n        ['--ms-h-desktop']: \"\".concat(heightDesktop, \"px\"),\n        ['--ms-h-mobile']: \"\".concat(heightMobile, \"px\")\n      },\n      onpointerdown: e => this.onPointerDown(e),\n      onpointerup: e => this.onPointerUp(e, slides.length)\n    }, m(\"div\", {\n      className: \"MagicSlider-track\",\n      style: {\n        transform: \"translateX(\".concat(offsetPct, \"%)\")\n      }\n    }, slides.map((s, i) => m(\"a\", {\n      key: i,\n      className: \"MagicSlide\",\n      href: s.link || '#',\n      target: s.link ? s.newTab ? '_blank' : '_self' : undefined,\n      rel: s.link && s.newTab ? 'noopener' : undefined,\n      style: {\n        backgroundImage: \"url('\".concat(s.image, \"')\")\n      },\n      onclick: e => {\n        if (!s.link) e.preventDefault();\n      }\n    }))), slides.length > 1 && m('[', null, m(\"button\", {\n      className: \"MagicSlider-btn prev\",\n      \"aria-label\": \"Previous\",\n      onclick: () => this.prev(slides.length)\n    }, m(\"i\", {\n      className: \"fas fa-chevron-left\"\n    })), m(\"button\", {\n      className: \"MagicSlider-btn next\",\n      \"aria-label\": \"Next\",\n      onclick: () => this.next(slides.length)\n    }, m(\"i\", {\n      className: \"fas fa-chevron-right\"\n    })), m(\"div\", {\n      className: \"MagicSlider-dots\"\n    }, slides.map((_, i) => m(\"button\", {\n      key: i,\n      className: 'dot' + (this.index === i ? ' is-active' : ''),\n      \"aria-label\": \"Slide \".concat(i + 1),\n      onclick: () => {\n        this.index = i;\n      }\n    }))))));\n  }\n  view(vnode) {\n    const {\n      fitToLayout\n    } = vnode.attrs;\n    if (fitToLayout) {\n      return m(\"div\", {\n        className: \"MagicSlider-outer\"\n      }, m(\"div\", {\n        className: \"container\"\n      }, m(\"div\", {\n        className: \"sideNavOffset\"\n      }, this.viewInner(vnode))));\n    }\n    return this.viewInner(vnode);\n  }\n}\nflarum.reg.add('capybash-magicslider', 'forum/components/MagicSlider', MagicSlider);","import app from 'flarum/forum/app';\nimport { override } from 'flarum/common/extend';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport WelcomeHero from 'flarum/forum/components/WelcomeHero';\nimport MagicSlider from './components/MagicSlider';\nfunction isTrue(v) {\n  return v === true || v === 1 || v === '1' || v === 'true';\n}\nfunction buildSlider() {\n  const raw = app.forum.attribute('capybash-magicslider.slides') || '[]';\n  let slides = [];\n  try {\n    slides = JSON.parse(raw);\n  } catch (_unused) {\n    slides = [];\n  }\n  const norm = slides.filter(s => s && s.image).map(s => ({\n    image: s.image || '',\n    link: s.link || '',\n    newTab: s.newTab === true || s.newTab === 'true'\n  }));\n  if (!norm.length) return null;\n  const heightDesktop = Number(app.forum.attribute('capybash-magicslider.height_desktop') || 260);\n  const heightMobile = Number(app.forum.attribute('capybash-magicslider.height_mobile') || 200);\n  const paddingDesktop = Number(app.forum.attribute('capybash-magicslider.padding_desktop') || 0);\n  const paddingMobile = Number(app.forum.attribute('capybash-magicslider.padding_mobile') || 0);\n  const radiusDesktop = Number(app.forum.attribute('capybash-magicslider.radius_desktop') || 0);\n  const radiusMobile = Number(app.forum.attribute('capybash-magicslider.radius_mobile') || 0);\n  const autoplay = Number(app.forum.attribute('capybash-magicslider.autoplay') || 0);\n  const fitToLayout = isTrue(app.forum.attribute('capybash-magicslider.fit_to_layout'));\n  return m(MagicSlider, {\n    slides: norm,\n    heightDesktop: heightDesktop,\n    heightMobile: heightMobile,\n    paddingDesktop: paddingDesktop,\n    paddingMobile: paddingMobile,\n    radiusDesktop: radiusDesktop,\n    radiusMobile: radiusMobile,\n    autoplayMs: autoplay,\n    fitToLayout: fitToLayout\n  });\n}\nfunction replaceHero(original) {\n  const slider = buildSlider();\n  return slider != null ? slider : original();\n}\napp.initializers.add('capybash-magicslider', () => {\n  override(IndexPage.prototype, 'hero', function (original) {\n    return replaceHero(original);\n  });\n  override(WelcomeHero.prototype, 'view', function (original) {\n    const slider = buildSlider();\n    return slider != null ? slider : original();\n  });\n});"],"names":["hasOwn","require","magic","RegExp","module","exports","attrs","extras","result","key","call","test","indexOf","Vnode","html","undefined","object","Object","prototype","toString","args","destructure","join","value","Array","isArray","i","length","push","encodeURIComponent","emptyAttrs","Map","decodeURIComponentSave","str","decodeURIComponent","err","string","charAt","slice","entries","split","counters","data","entry","levels","cursor","pop","j","level","nextLevel","isNumber","isNaN","parseInt","desc","getOwnPropertyDescriptor","parseQueryString","url","queryIndex","hashIndex","queryEnd","pathEnd","path","replace","params","window","df","delayedRemoval","domFor","cachedAttrsIsStaticMap","currentRedraw","currentRender","nameSpace","svg","math","getDocument","dom","ownerDocument","getNameSpace","vnode","xmlns","tag","checkState","original","state","Error","callHook","this","apply","arguments","activeElement","e","createNodes","parent","vnodes","start","end","hooks","nextSibling","ns","createNode","initLifecycle","createTextNode","children","insertDOM","createText","createHTML","fragment","createDocumentFragment","firstChild","domSize","childNodes","createFragment","is","element","createElementNS","createElement","setAttr","setAttrs","maybeSetContentEditable","selectedIndex","normalized","setLateSelectAttrs","sentinel","view","create","$$reentrantLock$$","instance","normalize","initComponent","createComponent","possibleParents","caption","thead","tbody","tfoot","tr","th","td","colgroup","col","match","temp","innerHTML","child","appendChild","updateNodes","old","removeNodes","isOldKeyed","isKeyed","oldStart","o","v","oe","ve","topSibling","oldEnd","updateNode","getNextSibling","moveDOM","map","lisIndices","originalNextSibling","vnodesLength","oldIndices","li","pos","matched","getKeyMap","oldIndex","a","u","il","lisTemp","c","makeLisIndices","commonLength","removeNode","oldTag","events","force","onbeforeupdate","text","shouldNotUpdate","updateLifecycle","nodeValue","updateText","removeDOM","updateHTML","updateFragment","get","val","has","console","warn","removeAttr","updateAttrs","updateElement","updateComponent","currentDOM","target","insertBefore","contenteditable","contentEditable","content","tryBlockRemove","source","counter","onbeforeremove","generation","set","Promise","resolve","finally","tryResumeRemove","onremove","removeChild","_","isLifecycleMethod","attr","parentNode","isFormAttribute","updateEvent","setAttributeNS","updateStyle","hasPropertyKey","type","error","setAttribute","removeAttribute","nsLastIndex","style","includes","setProperty","String","removeProperty","EventDict","removeEventListener","addEventListener","oninit","oncreate","bind","onupdate","handleEvent","ev","handler","currentTarget","self","redraw","then","preventDefault","stopPropagation","TypeError","contains","prevRedraw","prevDOM","active","namespace","namespaceURI","textContent","normalizeChildren","focus","render","schedule","subscriptions","pending","offset","sync","mount","root","component","index","splice","hyperscript","request","mountRedraw","m","trust","Fragment","route","buildQueryString","parsePathname","buildPathname","censor","requestAnimationFrame","hyperscriptVnode","_len","_key","template","templateData","templateKeys","keys","regexp","extra","k","r","values","exec","hasOwnProperty","WeakMap","node","input","compileTemplate","$window","compiled","fallbackRoute","currentResolver","currentPath","lastUpdate","callAsync","setImmediate","setTimeout","p","scheduled","ready","hasBeenResolved","RouterRoot","fireAsync","SKIP","resolveRoute","prefix","location","hash","search","pathname","concat","reject","assign","history","loop","check","payload","matchedRoute","localComp","update","comp","onmatch","defaultRoute","routes","SyntaxError","defaultData","some","ReferenceError","options","title","replaceState","pushState","href","Link","onclick","selector","disabled","Boolean","defaultPrevented","button","which","ctrlKey","metaKey","shiftKey","altKey","param","oncompletion","PromiseProxy","executor","hasHeader","name","headers","toLowerCase","__proto__","promise","replacedAbort","method","toUpperCase","body","assumeJSON","serialize","JSON","FormData","URLSearchParams","responseType","extract","xhr","XMLHttpRequest","aborted","isTimeout","abort","open","async","user","password","setRequestHeader","deserialize","withCredentials","timeout","onreadystatechange","readyState","message","success","status","response","parse","responseText","completeErrorResponse","code","ontimeout","config","send","stringify","makeRequest","background","count","complete","wrap","constructor","next","query","resolved","variadic","newQueryIndex","newHashIndex","newQueryEnd","newPathEnd","querystring","selectorParser","selectorCache","isFormAttributeKey","hasClass","className","class","execSelector","classes","isStatic","id","attrValue","isEmpty","compileSelector","__webpack_module_cache__","__webpack_require__","moduleId","flarum","reg","_webpack_runtimes","cachedModule","__webpack_modules__","n","getter","__esModule","d","definition","defineProperty","enumerable","obj","prop","_typeof","Symbol","iterator","_defineProperty","t","toPrimitive","toPropertyKey","configurable","writable","MagicSlider","super","matchMedia","matches","ms","Number","autoplayMs","slides","interval","setInterval","mq","mqHandler","_this$mq","isMobile","addListener","clearInterval","removeListener","len","prev","onPointerDown","_e$clientX","touchStartX","clientX","onPointerUp","_e$clientX2","dx","Math","abs","viewInner","heightDesktop","heightMobile","paddingDesktop","paddingMobile","radiusDesktop","radiusMobile","offsetPct","pad","rad","padding","borderRadius","onpointerdown","onpointerup","transform","s","link","newTab","rel","backgroundImage","image","fitToLayout","buildSlider","raw","attribute","_unused","norm","filter","autoplay","add","override","slider","replaceHero"],"sourceRoot":""}